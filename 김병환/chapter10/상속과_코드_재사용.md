# ğŸ“š 10ì¥ ìƒì†ê³¼ ì½”ë“œ ì¬ì‚¬ìš©

ì½”ë“œë¥¼ ì¬ì‚¬ìš©í•˜ë ¤ëŠ” ê°•ë ¥í•œ ë™ê¸° ì´ë©´ì—ëŠ” ì¤‘ë³µëœ ì½”ë“œë¥¼ ì œê±°í•˜ë ¤ëŠ” ìš•ë§ì´ ìˆ¨ì–´ ìˆë‹¤.

## ğŸ“– 10.1 ìƒì†ê³¼ ì¤‘ë³µ ì½”ë“œ

ì¤‘ë³µ ì½”ë“œëŠ” ì‚¬ëŒë“¤ì˜ ë§ˆìŒì†ì— ì˜ì‹¬ê³¼ ë¶ˆì‹ ì˜ ì”¨ì•—ì„ ë¿Œë¦°ë‹¤.

### ğŸ”– 10.1.1 DRY ì›ì¹™

**ì¤‘ë³µ ì½”ë“œëŠ” ë³€ê²½ì„ ë°©í•´í•œë‹¤.** ì´ê²ƒì´ ì¤‘ë³µ ì½”ë“œë¥¼ ì œê±°í•´ì•¼ í•˜ëŠ” ê°€ì¥ í° ì´ìœ ë‹¤.

- ì¤‘ë³µ ì—¬ë¶€ë¥¼ íŒë‹¨í•˜ëŠ” ê¸°ì¤€ì€ ë³€ê²½ì´ë‹¤.
- ìš”êµ¬ì‚¬í•­ì´ ë³€ê²½ëì„ ë•Œ ë‘ ì½”ë“œë¥¼ í•¨ê»˜ ìˆ˜ì •í•´ì•¼ í•œë‹¤ë©´ ì¤‘ë³µ
- DRY ì›ì¹™ì„ ë”°ë¥´ì.
  - > Don't Repeat Yourself
  - í•œ ë²ˆ, ë‹¨ í•œ ë²ˆì˜ ì›ì¹™
  - ë‹¨ì¼ ì§€ì  ì œì–´ ì›ì¹™
  - ëª¨ë“  ì§€ì‹ì€ ì‹œìŠ¤í…œ ë‚´ì—ì„œ ë‹¨ì¼í•˜ê³ , ì• ë§¤í•˜ì§€ ì•Šê³ , ì •ë§ë¡œ ë¯¿ì„ ë§Œí•œ í‘œí˜„ ì–‘ì‹ì„ ê°€ì ¸ì•¼ í•œë‹¤.

### ğŸ”– 10.1.2 ì¤‘ë³µê³¼ ë³€ê²½

#### ğŸˆ ì¤‘ë³µ ì½”ë“œ ì‚´í´ë³´ê¸°

```java
@RequiredArgsConstructor
public class Call {
    
    @Getter
    private final LocalDateTime from;
    
    private final LocalDateTime to;

    public Duration getDuration() {
        return Duration.between(from, to);
    }
}
```

- ê°œë³„ í†µí™” ê¸°ê°„ìš¸ ì €ì¥í•˜ëŠ” Class

```java
@Getter
@RequiredArgsConstructor
public class Phone {

    private final Money amount;

    private final Duration seconds;

    private List<Call> calls = new ArrayList<>();

    public void call(Call call) {
        calls.add(call);
    }

    public Money calculateFee() {
        Money result = Money.ZERO;

        for (Call call : calls) {
            result = result.plus(amount.times((double) call.getDuration().getSeconds() / seconds.getSeconds()));
        }

        return result;
    }
}
```

- ìœ„ ìš”ê¸ˆì œëŠ” ì¼ë°˜ ìš”ê¸ˆì œì´ë‹¤.
- ì—¬ê¸°ì„œ, ì‹¬ì•¼ í• ì¸ ìš”ê¸ˆì œ(ë°¤ 10ì‹œ ì´í›„ì˜ í†µí™”ì— ëŒ€í•´ í• ì¸)ê°€ ì¶”ê°€ ë˜ì—ˆë‹¤.

```java
@RequiredArgsConstructor
public class NightlyDiscountPhone {
    
    private static final int LATE_NIGHT_HOUR = 22;

    private final Money nightlyAmount;

    private final Money regularAmount;

    private final Duration seconds;

    private List<Call> calls = new ArrayList<>();

    public Money calculateCallFee() {
        Money result = Money.ZERO;

        for (Call call : calls) {
            if (call.getFrom().getHour() >= LATE_NIGHT_HOUR) {
                result = result.plus(nightlyAmount.times((double) call.getDuration().getSeconds() / seconds.getSeconds()));
            } else {
                result = result.plus(regularAmount.times((double) call.getDuration().getSeconds() / seconds.getSeconds()));
            }
        }

        return result;
    }
}
```

- ì¤‘ë³µ ì½”ë“œê°€ ìƒê²¼ë‹¤!

#### ğŸˆ ì¤‘ë³µ ì½”ë“œ ìˆ˜ì •í•˜ê¸°

ìƒˆë¡œìš´ ìš”êµ¬ì‚¬í•­: í†µí™” ìš”ê¸ˆì— ë¶€ê³¼í•  ì„¸ê¸ˆ ê³„ì‚°

```java
@Getter
@RequiredArgsConstructor
public class Phone {

    private final Money amount;

    private final Duration seconds;
    
    private final double taxRate;

    private List<Call> calls = new ArrayList<>();

    public void call(Call call) {
        calls.add(call);
    }

    public Money calculateFee() {
        Money result = Money.ZERO;

        for (Call call : calls) {
            result = result.plus(amount.times((double) call.getDuration().getSeconds() / seconds.getSeconds()));
        }

        return result.plus(result.times(taxRate));
    }
}
```

```java
@RequiredArgsConstructor
public class NightlyDiscountPhone {

    private static final int LATE_NIGHT_HOUR = 22;

    private final Money nightlyAmount;
    
    private final Money regularAmount;
    
    private final Duration seconds;
    
    private final double taxRate;
    
    private List<Call> calls = new ArrayList<>();

    public Money calculateCallFee() {
        Money result = Money.ZERO;

        for (Call call : calls) {
            if (call.getFrom().getHour() >= LATE_NIGHT_HOUR) {
                result = result.plus(nightlyAmount.times((double) call.getDuration().getSeconds() / seconds.getSeconds()));
            } else {
                result = result.plus(regularAmount.times((double) call.getDuration().getSeconds() / seconds.getSeconds()));
            }
        }

        return result.minus(result.times(taxRate));
    }
}
```

- ì´ì²˜ëŸ¼ ì¤‘ë³µì½”ë“œëŠ” ìƒˆë¡œìš´ ì¤‘ë³µì½”ë“œë¥¼ ë¶€ë¥¸ë‹¤.
- `minus`ë¥¼ í˜¸ì¶œí•˜ê³  ìˆë‹¤.

#### ğŸˆ íƒ€ì… ì½”ë“œ ì‚¬ìš©í•˜ê¸°

```java
@Getter
@RequiredArgsConstructor
public class Phone {

    private static final int LATE_NIGHT_HOUR = 22;

    enum PhoneType {REGULAR, NIGHTLY}

    private final PhoneType type;

    private final Money amount;

    private final Money regularAmount;

    private final Money nightlyAmount;

    private final Duration seconds;

    private List<Call> calls = new ArrayList<>();

    public Phone(Money amount, Duration seconds) {
        this(PhoneType.REGULAR, amount, Money.ZERO, Money.ZERO, seconds);
    }

    public Phone(Money regularAmount, Money nightlyAmount, Duration seconds) {
        this(PhoneType.NIGHTLY, Money.ZERO, regularAmount, nightlyAmount, seconds);
    }

    public Money calculateFee() {
        Money result = Money.ZERO;

        for (Call call : calls) {
            if (type == PhoneType.REGULAR) {
                result = result.plus(amount.times((double) call.getDuration().getSeconds() / seconds.getSeconds()));
            } else {
                if (call.getFrom().getHour() >= LATE_NIGHT_HOUR) {
                    result = result.plus(nightlyAmount.times((double) call.getDuration().getSeconds() / seconds.getSeconds()));
                } else {
                    result = result.plus(regularAmount.times((double) call.getDuration().getSeconds() / seconds.getSeconds()));
                }
            }
        }

        return result;
    }
}
```

- ë‚®ì€ ì‘ì§‘ë„ì™€ ë†’ì€ ê²°í•©ë„ë¥¼ ê°€ì§„ë‹¤.

### ğŸ”– 10.1.3 ìƒì†ì„ ì´ìš©í•´ì„œ ì¤‘ë³µ ì½”ë“œ ì œê±°í•˜ê¸°

```java
public class NightlyDiscountPhone extends Phone {
    private static final int LATE_NIGHT_HOUR = 22;

    private Money nightlyAmount;

    public NightlyDiscountPhone(Money nightlyAmount, Money regularAmount, Duration seconds) {
        super(regularAmount, seconds);
        this.nightlyAmount = nightlyAmount;
    }

    @Override
    public Money calculateFee() {
        Money result = super.calculateFee();
        
        Money nightlyFee = Money.ZERO;
        for (Call call : getCalls()) {
            if (call.getFrom().getHour() >= LATE_NIGHT_HOUR) {
                nightlyFee = nightlyFee.plus(getAmount().minus(nightlyAmount.times((double) call.getDuration().getSeconds() / getSeconds().getSeconds())));
            }
        }
        
        return result.minus(nightlyFee);
    }
}
```

- ìœ„ ì½”ë“œ ì²˜ëŸ¼ ìƒì†ì„ ì—¼ë‘ì— ë‘ê³  ì„¤ê³„ë˜ì§€ ì•Šì€ í´ë˜ìŠ¤ë¥¼ ìƒì†ì„ ì´ìš©í•´ ì¬ì‚¬ìš©í•˜ëŠ” ê²ƒì€ ì‰½ì§€ ì•Šë‹¤.
- ìì‹ í´ë˜ìŠ¤ì˜ ì‘ì„±ìê°€ ë¶€ëª¨ í´ë˜ìŠ¤ì˜ êµ¬í˜„ ë°©ë²•ì— ëŒ€í•œ ì •í™•í•œ ì§€ì‹ì„ ê°€ì ¸ì•¼ í•œë‹¤.

### ğŸ”– 10.1.4 ê°•í•˜ê²Œ ê²°í•©ëœ Phoneê³¼ NightlyDiscountPhone

ìƒˆë¡œìš´ ìš”êµ¬ì‚¬í•­: ì„¸ê¸ˆ ë¶€ê³¼

```java
@Getter
@RequiredArgsConstructor
public class Phone {

    private final Money amount;

    private final Duration seconds;

    private final double taxRate;

    private List<Call> calls = new ArrayList<>();

    public Money calculateFee() {
        Money result = Money.ZERO;

        for (Call call : calls) {
            result = result.plus(amount.times((double) call.getDuration().getSeconds() / seconds.getSeconds()));
        }

        return result.plus(result.times(taxRate));
    }
}
```

```java
public class NightlyDiscountPhone extends Phone {
    private static final int LATE_NIGHT_HOUR = 22;

    private Money nightlyAmount;

    public NightlyDiscountPhone(Money nightlyAmount, Money regularAmount, Duration seconds, double taxRate) {
        super(regularAmount, seconds, taxRate);
        this.nightlyAmount = nightlyAmount;
    }

    @Override
    public Money calculateFee() {
        Money result = super.calculateFee();

        Money nightlyFee = Money.ZERO;
        for (Call call : getCalls()) {
            if (call.getFrom().getHour() >= LATE_NIGHT_HOUR) {
                nightlyFee = nightlyFee.plus(getAmount().minus(nightlyAmount.times((double) call.getDuration().getSeconds() / getSeconds().getSeconds())));
            }
        }

        return result.minus(nightlyFee.plus(nightlyFee.times(getTaxRate())));
    }
}
```

- ì¤‘ë³µ ë¡œì§ì„ ì œê±°í•˜ê¸° ìœ„í•´ ìƒì†ì„ ì‚¬ìš©í–ˆìŒì—ë„ ì¤‘ë³µ ì½”ë“œê°€ ìƒê²¼ë‹¤â—

> ìì‹ í´ë˜ìŠ¤ì˜ ë©”ì„œë“œ ì•ˆì—ì„œ super ì°¸ì¡°ë¥¼ ì´ìš©í•´ ë¶€ëª¨ í´ë˜ìŠ¤ì˜ ë©”ì„œë“œë¥¼ ì§ì ‘ í˜¸ì¶œí•  ê²½ìš° ë‘ í´ë˜ìŠ¤ëŠ” ê°•í•˜ê²Œ ê²°í•©ëœë‹¤. super í˜¸ì¶œì„ ì œê±°í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì°¾ì•„ ê²°í•©ë„ë¥¼ ì œê±°í•˜ë¼.

## ğŸ“– 10.2 ì·¨ì•½í•œ ê¸°ë°˜ í´ë˜ìŠ¤ ë¬¸ì œ

- ë¶€ëª¨ í´ë˜ìŠ¤ì˜ ë³€ê²½ì— ì˜í•´ ìì‹ í´ë˜ìŠ¤ê°€ ì˜í–¥ì„ ë°›ëŠ” í˜„ìƒ
- ìƒì†ì„ ì‚¬ìš©í•œë‹¤ë©´ í”¼í•  ìˆ˜ ì—†ëŠ” OOPì˜ ê·¼ë³¸ì ì¸ ì·¨ì•½ì„±
- ìº¡ìŠí™”ë¥¼ ì•½í™”ì‹œí‚¤ê³  ê²°í•©ë„ë¥¼ ë†’ì¸ë‹¤.

### ğŸ”– 10.2.1 ë¶ˆí•„ìš”í•œ ì¸í„°í˜ì´ìŠ¤ ìƒì† ë¬¸ì œ

Java ì´ˆê¸° ë²„ì „ì˜ ëŒ€í‘œì ì¸ ì‚¬ë¡€

- `java.util.Stack`
  - Stackì„ Vectorì˜ ìì‹ í´ë˜ìŠ¤ë¡œ êµ¬í˜„
  - Stackì´ ê·œì¹™ì„ ë¬´ë„ˆëœ¨ë¦´ ì—¬ì§€ê°€ ìˆëŠ” ìœ„í—˜í•œ Vectorì˜ í¼ë¸”ë¦­ ì¸í„°í˜ì´ìŠ¤ê¹Œì§€ë„ í•¨ê»˜ ìƒì†ë°›ìŒ.
- `java.util.Properties`
  - Mapì˜ ì¡°ìƒì¸ Hashtableì„ ìƒì†
  - String íƒ€ì… ì´ì™¸ì˜ í‚¤ì™€ ê°’ì´ë¼ë„ ì €ì¥ì´ ê°€ëŠ¥í•˜ê²Œ ë˜ì–´ë²„ë¦¼.

> ìƒì†ë°›ì€ ë¶€ëª¨ í´ë˜ìŠ¤ì˜ ë©”ì„œë“œê°€ ìì‹ í´ë˜ìŠ¤ì˜ ë‚´ë¶€ êµ¬ì¡°ì— ëŒ€í•œ ê·œì¹™ì„ ê¹¨íŠ¸ë¦´ ìˆ˜ ìˆë‹¤.

### ğŸ”– 10.2.2 ë©”ì„œë“œ ì˜¤ë²„ë¼ì´ë”©ì˜ ì˜¤ì‘ìš© ë¬¸ì œ

- [ì´í™í‹°ë¸Œ ìë°” ì•„ì´í…œ18](https://bottleh.netlify.app/backend/effective-java/4%EC%9E%A5_%ED%81%B4%EB%9E%98%EC%8A%A4%EC%99%80_%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4/#%EC%95%84%EC%9D%B4%ED%85%9C18-%EC%83%81%EC%86%8D%EB%B3%B4%EB%8B%A4%EB%8A%94-%EC%BB%B4%ED%8F%AC%EC%A7%80%EC%85%98%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%98%EB%9D%BC)

> ìì‹ í´ë˜ìŠ¤ê°€ ë¶€ëª¨ í´ë˜ìŠ¤ì˜ ë©”ì„œë“œë¥¼ ì˜¤ë²„ë¼ì´ë”©í•  ê²½ìš° ë¶€ëª¨ í´ë˜ìŠ¤ê°€ ìì‹ì˜ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì— ìì‹ í´ë˜ìŠ¤ê°€ ê²°í•©ë  ìˆ˜ ìˆë‹¤.

### ğŸ”– 10.2.3 ë¶€ëª¨ í´ë˜ìŠ¤ì™€ ìì‹ í´ë˜ìŠ¤ì˜ ë™ì‹œ ìˆ˜ì • ë¬¸ì œ

```java
@Getter
@RequiredArgsConstructor
public class Song {

    private final String singer;
    
    private final String title;
}
```

```java
public class Playlist {

    @Getter
    private final List<Song> tracks = new ArrayList<>();

    public void append(Song song) {
        getTracks().add(song);
    }
}
```

```java
public class PersonalPlaylist extends Playlist {
    
    public void remove(Song song) {
        getTracks().remove(song);
    }
}
```

- ìƒˆë¡œìš´ ìš”êµ¬ì‚¬í•­: ê°€ìˆ˜ë³„ ë…¸ë˜ì˜ ì œëª©ë„ í•¨ê»˜ ê´€ë¦¬

```java
@Getter
public class Playlist {

    private final List<Song> tracks = new ArrayList<>();

    private final Map<String, String> singers = new HashMap<>();

    public void append(Song song) {
        getTracks().add(song);
        singers.put(song.getSinger(), song.getTitle());
    }
}
```

```java
public class PersonalPlaylist extends Playlist {

    public void remove(Song song) {
        getTracks().remove(song);
        getSingers().remove(song.getSinger());
    }
}
```

- ê²°í•©ë„ë€ ë‹¤ë¥¸ ëŒ€ìƒì— ëŒ€í•´ ì•Œê³  ìˆëŠ” ì§€ì‹ì˜ ì–‘ì´ë‹¤.

> í´ë˜ìŠ¤ë¥¼ ìƒì†í•˜ë©´ ê²°í•©ë„ë¡œ ì¸í•´ ìì‹ í´ë˜ìŠ¤ì™€ ë¶€ëª¨ í´ë˜ìŠ¤ì˜ êµ¬í˜„ì„ ì˜ì›íˆ ë³€ê²½í•˜ì§€ ì•Šê±°ë‚˜, ìì‹ í´ë˜ìŠ¤ì™€ ë¶€ëª¨ í´ë˜ìŠ¤ë¥¼ ë™ì‹œì— ë³€ê²½í•˜ê±°ë‚˜ ë‘˜ ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒí•  ìˆ˜ ë°–ì— ì—†ë‹¤.

## ğŸ“– 10.3 Phone ë‹¤ì‹œ ì‚´í´ë³´ê¸°

### ğŸ”– 10.3.1 ì¶”ìƒí™”ì— ì˜ì¡´í•˜ì

- ë¶€ëª¨ í´ë˜ìŠ¤ì™€ ìì‹ í´ë˜ìŠ¤ ëª¨ë‘ ì¶”ìƒí™”ì— ì˜ì¡´í•˜ë„ë¡ ìˆ˜ì •

ì½”ë“œ ì¤‘ë³µì„ ì œê±°í•˜ê¸° ìœ„í•´ ìƒì†ì„ ë„ì…í•  ë•Œ ë”°ë¥´ëŠ” ì›ì¹™

1. ë‘ ë©”ì„œë“œê°€ ìœ ì‚¬í•˜ê²Œ ë³´ì¸ë‹¤ë©´ ì°¨ì´ì ì„ ë©”ì„œë“œë¡œ ì¶”ì¶œ
2. ë¶€ëª¨ í´ë˜ìŠ¤ì˜ ì½”ë“œë¥¼ í•˜ìœ„ë¡œ ë‚´ë¦¬ì§€ ë§ê³  ìì‹ í´ë˜ìŠ¤ì˜ ì½”ë“œë¥¼ ìƒìœ„ë¡œ ì˜®ê²¨ë¼.

### ğŸ”– 10.3.2 ì°¨ì´ë¥¼ ë©”ì„œë“œë¡œ ì¶”ì¶œí•˜ë¼

```java
@Getter
@RequiredArgsConstructor
public class Phone {

    private final Money amount;

    private final Duration seconds;

    private List<Call> calls = new ArrayList<>();

    public Money calculateFee() {
        Money result = Money.ZERO;

        for (Call call : calls) {
            result = result.plus(calculateCallFee(call));
        }

        return result;
    }

    private Money calculateCallFee(Call call) {
        return amount.times((double) call.getDuration().getSeconds() / seconds.getSeconds());
    }
}
```

```java
@RequiredArgsConstructor
public class NightlyDiscountPhone {

    private static final int LATE_NIGHT_HOUR = 22;

    private final Money nightlyAmount;

    private final Money regularAmount;

    private final Duration seconds;

    private List<Call> calls = new ArrayList<>();

    public Money calculateCallFee() {
        Money result = Money.ZERO;

        for (Call call : calls) {
            result = result.plus(calculateCallFee(call));
        }

        return result;
    }

    private Money calculateCallFee(Call call) {
        if (call.getFrom().getHour() >= LATE_NIGHT_HOUR) {
            return nightlyAmount.times((double) call.getDuration().getSeconds() / seconds.getSeconds());
        }
        return regularAmount.times((double) call.getDuration().getSeconds() / seconds.getSeconds());
    }
}
```

### ğŸ”– 10.3.3 ì¤‘ë³µ ì½”ë“œë¥¼ ë¶€ëª¨ í´ë˜ìŠ¤ë¡œ ì˜¬ë ¤ë¼

```java
public abstract class AbstractPhone {

    private final List<Call> calls = new ArrayList<>();

    public Money calculateFee() {
        Money result = Money.ZERO;

        for (Call call : calls) {
            result = result.plus(calculateCallFee(call));
        }

        return result;
    }

    protected abstract Money calculateCallFee(Call call);
}
```

```java
@Getter
@RequiredArgsConstructor
public class Phone extends AbstractPhone{

    private final Money amount;

    private final Duration seconds;

    @Override
    protected Money calculateCallFee(Call call) {
        return amount.times((double) call.getDuration().getSeconds() / seconds.getSeconds());
    }
}
```

```java
@RequiredArgsConstructor
public class NightlyDiscountPhone extends AbstractPhone {

    private static final int LATE_NIGHT_HOUR = 22;

    private final Money nightlyAmount;

    private final Money regularAmount;

    private final Duration seconds;

    @Override
    protected Money calculateCallFee(Call call) {
        if (call.getFrom().getHour() >= LATE_NIGHT_HOUR) {
            return nightlyAmount.times((double) call.getDuration().getSeconds() / seconds.getSeconds());
        }
        return regularAmount.times((double) call.getDuration().getSeconds() / seconds.getSeconds());
    }
}
```

### ğŸ”– 10.3.4 ì¶”ìƒí™”ê°€ í•µì‹¬ì´ë‹¤

- ì„¸ í´ë˜ìŠ¤ëŠ” ê°ê° í•˜ë‚˜ì˜ ë³€ê²½ ì´ìœ ë§Œì„ ê°€ì§„ë‹¤.
  - ë‹¨ì¼ ì±…ì„ ì›ì¹™ì„ ì¤€ìˆ˜í•˜ë¯€ë¡œ ì‘ì§‘ë„ê°€ ë†’ë‹¤.
- ë¶€ëª¨ í´ë˜ìŠ¤ì˜ ë‚´ë¶€ êµ¬í˜„ì´ ë³€ê²½ë˜ë”ë¼ë„ ìì‹ í´ë˜ìŠ¤ëŠ” ì˜í–¥ì„ ë°›ì§€ ì•ŠëŠ”ë‹¤.
- ìƒì† ê³„ì¸µì´ ì½”ë“œë¥¼ ì§„í™”ì‹œí‚¤ëŠ” ë° ê±¸ë¦¼ëŒì´ ëœë‹¤ë©´ ì¶”ìƒí™”ë¥¼ ì°¾ì•„ë‚´ê³  ìƒì† ê³„ì¸µ ì•ˆì˜ í´ë˜ìŠ¤ë“¤ì´ ê·¸ ì¶”ìƒí™”ì— ì˜ì¡´í•˜ë„ë¡ ì½”ë“œë¥¼ ë¦¬íŒ©í„°ë§

### ğŸ”– 10.3.5 ì˜ë„ë¥¼ ë“œëŸ¬ë‚´ëŠ” ì´ë¦„ ì„ íƒí•˜ê¸°

```java
public abstract class Phone {
}

public class RegularPhone extends Phone {
}

public class NightlyDiscountPhone extends Phone {
}
```

### ğŸ”– 10.3.6 ì„¸ê¸ˆ ì¶”ê°€í•˜ê¸°

```java
@RequiredArgsConstructor
public abstract class Phone {
    
    private final double taxRate;
    
    private List<Call> calls = new ArrayList<>();

    public Money calculateFee() {
        Money result = Money.ZERO;

        for (Call call : calls) {
            result = result.plus(calculateCallFee(call));
        }

        return result.plus(result.times(taxRate));
    }

    protected abstract Money calculateCallFee(Call call);
}
```

```java
@Getter
public class RegularPhone extends Phone {

    private final Money amount;

    private final Duration seconds;

    public RegularPhone(double taxRate, Money amount, Duration seconds) {
        super(taxRate);
        this.amount = amount;
        this.seconds = seconds;
    }

    @Override
    protected Money calculateCallFee(Call call) {
        return amount.times((double) call.getDuration().getSeconds() / seconds.getSeconds());
    }
}
```

```java
public class NightlyDiscountPhone extends Phone {

    private static final int LATE_NIGHT_HOUR = 22;

    private final Money nightlyAmount;

    private final Money regularAmount;

    private final Duration seconds;

    public NightlyDiscountPhone(double taxRate, Money nightlyAmount, Money regularAmount, Duration seconds) {
        super(taxRate);
        this.nightlyAmount = nightlyAmount;
        this.regularAmount = regularAmount;
        this.seconds = seconds;
    }

    @Override
    protected Money calculateCallFee(Call call) {
        if (call.getFrom().getHour() >= LATE_NIGHT_HOUR) {
            return nightlyAmount.times((double) call.getDuration().getSeconds() / seconds.getSeconds());
        }
        return regularAmount.times((double) call.getDuration().getSeconds() / seconds.getSeconds());
    }
}
```

- ì±…ì„ì„ ì•„ë¬´ë¦¬ ì˜ ë¶„ë¦¬í•˜ë”ë¼ë„ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ì˜ ì¶”ê°€ëŠ” ì¢…ì¢… ìƒì† ê³„ì¸µ ì „ë°˜ì— ê±¸ì¹œ ë³€ê²½ì„ ìœ ë°œ
- ìš°ë¦¬ê°€ ì›í•˜ëŠ” ê²ƒì€ í–‰ë™ì„ ë³€ê²½í•˜ê¸° ìœ„í•´ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ë¥¼ ì¶”ê°€í•˜ë”ë¼ë„ ìƒì† ê³„ì¸µ ì „ì²´ì— ê±¸ì³ ë¶€ì‘ìš©ì´ í¼ì§€ì§€ ì•Šê²Œ ë§‰ëŠ” ê²ƒ

## ğŸ“– 10.4 ì°¨ì´ì— ì˜í•œ í”„ë¡œê·¸ë˜ë°

- ê¸°ì¡´ ì½”ë“œì™€ ë‹¤ë¥¸ ë¶€ë¶„ë§Œì„ ì¶”ê°€í•¨ìœ¼ë¡œì¨ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ê¸°ëŠ¥ì„ í™•ì¥í•˜ëŠ” ë°©ë²•
- ì¤‘ë³µ ì½”ë“œë¥¼ ì œê±°í•˜ê³  ì½”ë“œë¥¼ ì¬ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ëª©í‘œ
- ìƒì†ì€ ì½”ë“œ ì¬ì‚¬ìš©ê³¼ ê´€ë ¨ëœ ëŒ€ë¶€ë¶„ì˜ ê²½ìš°ì— ìš°ì•„í•œ í•´ê²° ë°©ë²•ì´ ì•„ë‹ˆë‹¤.
  - **í•©ì„±**ì´ ë” ì¢‹ì€ ë°©ë²•â—
