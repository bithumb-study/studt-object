# ğŸ“š 6ì¥ ë©”ì‹œì§€ì™€ ì¸í„°í˜ì´ìŠ¤

- ê°ì²´ì§€í–¥ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ í´ë˜ìŠ¤ì˜ ì§‘í•©ì´ ì•„ë‹Œ ë©”ì‹œì§€ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ê°ì²´ì˜ ì±…ì„ì— ì´ˆì ì„ ë§ì¶°ì•¼ í•œë‹¤
- ê°ì²´ê°€ ìˆ˜ì‹ í•˜ëŠ” ë©”ì‹œì§€ë“¤ì´ í¼ë¸”ë¦­ ì¸í„°í˜ì´ìŠ¤ë¡œ êµ¬ì„±

## ğŸ“– 6.1 í˜‘ë ¥ê³¼ ë©”ì‹œì§€

### ğŸ”– 6.1.1 í´ë¼ì´ì–¸íŠ¸-ì„œë²„ ëª¨ë¸

- í˜‘ë ¥ ì•ˆì—ì„œ ë©”ì‹œì§€ë¥¼ ì „ì†¡í•˜ëŠ” ê°ì²´ë¥¼ í´ë¼ì´ì–¸íŠ¸, ë©”ì‹œì§€ë¥¼ ìˆ˜ì‹ í•˜ëŠ” ê°ì²´ë¥¼ ì„œë²„ë¼ ë¶€ë¦„
- í˜‘ë ¥ì€ í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ì˜ ì„œë¹„ìŠ¤ë¥¼ ìš”ì²­í•˜ëŠ” ë‹¨ë±¡í–¥ ìƒí˜¸ì‘ìš©ì´ë‹¤
- í˜‘ë ¥ì˜ ê´€ì ì—ì„œ ê°ì²´ëŠ” ìˆ˜ì‹ í•˜ëŠ” ë©”ì‹œì§€ ì§‘í•©ê³¼ ì „ì†¡í•˜ëŠ” ë©”ì‹œì§€ì˜ ì§‘í•©ìœ¼ë¡œ êµ¬ì„±ëœë‹¤
- ![í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ì˜ ì—­í• ì„ ë™ì‹œì— ìˆ˜í–‰í•˜ëŠ” Movie](image/img.png)

### ğŸ”– 6.1.2 ë©”ì‹œì§€ì™€ ë©”ì‹œì§€ ì „ì†¡

- ë©”ì‹œì§€: ê°ì²´ë“¤ì´ í˜‘ë ¥í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ìœ ì¼í•œ ì˜ì‚¬ì†Œí†µ ìˆ˜ë‹¨
- ë©”ì‹œì§€ ì „ì†¡, ë©”ì‹œì§€ íŒ¨ì‹±: í•œ ê°ì²´ê°€ ë‹¤ë¥¸ ê°ì²´ì—ê²Œ ë„ì›€ì„ ìš”ì²­í•˜ëŠ” ê²ƒ
- ë©”ì‹œì§€ëŠ” **ì˜¤í¼ë ˆì´ì…˜ëª…**, **ì¸ì**ë¡œ êµ¬ì„±ë˜ë©° ë©”ì‹œì§€ ì „ì†¡ì€ ì—¬ê¸°ì— **ë©”ì‹œì§€ ìˆ˜ì‹ ì**ë¥¼ ì¶”ê°€í•œ ê²ƒ
- ![ì–¸ì–´ë³„ ë©”ì‹œì§€ ì „ì†¡ í‘œê¸°ë²•](image/img_1.png)

### ğŸ”– 6.1.3 ë©”ì‹œì§€ì™€ ë©”ì„œë“œ

- ë©”ì‹œì§€ë¥¼ ìˆ˜ì‹ í–ˆì„ ë•Œ ì‹¤ì œë¡œ ì‹¤í–‰ë˜ëŠ” í•¨ìˆ˜ ë˜ëŠ” í”„ë¡œì‹œì €ë¥¼ **ë©”ì„œë“œ**ë¼ ë¶€ë¦„
- ê°ì²´ì§€í–¥ì—ì„œëŠ” ë©”ì‹œì§€ ì „ì†¡ê³¼ ë©”ì„œë“œ í˜¸ì¶œì„ ëª…í™•í•˜ê²Œ êµ¬ë¶„í•¨ -> ì‹¤í–‰ ì‹œì ì— ì‹¤ì œë¡œ ì‹¤í–‰ë˜ëŠ” ì½”ë“œëŠ” ë©”ì‹œì§€ë¥¼ ìˆ˜ì‹ í•˜ëŠ” ê°ì²´ì˜ íƒ€ì…ì— ë”°ë¼ ë‹¬ë¼ì§€ê¸° ë•Œë¬¸
- ë©”ì‹œì§€ ì „ì†¡ìëŠ” ì–´ë–¤ ë©”ì‹œì§€ë¥¼ ì „ì†¡í•´ì•¼ í•˜ëŠ”ì§€ë§Œ ì•Œë©´ ë˜ê³ , ë©”ì‹œì§€ ìˆ˜ì‹ ìëŠ” ë©”ì‹œì§€ë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ í•„ìš”í•œ ë©”ì„œë“œë¥¼ ìŠ¤ìŠ¤ë¡œ ê²°ì •ë§Œ í•˜ë©´ ëœë‹¤ -> ëŠìŠ¨í•œ ê²°í•©
- ì‹¤í–‰ ì‹œì ì— ë©”ì‹œì§€ì™€ ë©”ì„œë“œë¥¼ ë°”ì¸ë”©í•˜ëŠ” ë©”ì»¤ë‹ˆì¦˜ì€ ë‘ ê°ì²´ ì‚¬ì´ì˜ ê²°í•©ë„ë¥¼ ë‚®ì¶° ìœ ì—°í•˜ê³  í™•ì¥ ê°€ëŠ¥í•œ ì½”ë“œë¥¼ ì‘ì„±í•  ìˆ˜ ìˆê²Œ ë§Œë“ ë‹¤

### ğŸ”– 6.1.4 í¼ë¸”ë¦­ ì¸í„°í˜ì´ìŠ¤ì™€ ì˜¤í¼ë ˆì´ì…˜

- ê°ì²´ê°€ ì˜ì‚¬ì†Œí†µì„ ìœ„í•´ ì™¸ë¶€ì— ê³µê°œí•˜ëŠ” ë©”ì‹œì§€ì˜ ì§‘í•©: **í¼ë¸”ë¦­ ì¸í„°í˜ì´ìŠ¤**
- í¼ë¸”ë¦­ ì¸í„°í˜ì´ìŠ¤ì— í¬í•¨ëœ ë©”ì‹œì§€: ì˜¤í¼ë ˆì´ì…˜
- ì˜¤í¼ë ˆì´ì…˜ì€ ë‚´ë¶€ì˜ êµ¬í˜„ ì½”ë“œëŠ” ì œì™¸í•˜ê³  ë©”ì‹œì§€ì™€ ê´€ë ¨ëœ ì‹œê·¸ë‹ˆì²˜ë¥¼ ê°€ë¦¬í‚¤ë©° ì¸í„°í˜ì´ìŠ¤ì— ì •ì˜ëœ ë©”ì„œë“œ ì´ë¦„ì´ ì˜¤í¼ë ˆì´ì…˜ì— í•´ë‹¹
- ë©”ì„œë“œëŠ” ë©”ì‹œì§€ë¥¼ ìˆ˜ì‹ í–ˆì„ ë•Œ ì‹¤ì œë¡œ ì‹¤í–‰ë˜ëŠ” ì½”ë“œ
- í”„ë¡œê·¸ë˜ë° ì–¸ì–´ì˜ ê´€ì ì—ì„œ ë©”ì‹œì§€ë¥¼ ì „ì†¡í•˜ë©´ ëŸ°íƒ€ì„ ì‹œìŠ¤í…œì€ ì˜¤í¼ë ˆì´ì…˜ í˜¸ì¶œë¡œ í•´ì„í•˜ê³  ë©”ì‹œì§€ë¥¼ ìˆ˜ì‹ í•œ ê°ì²´ì˜ ì‹¤ì œ íƒ€ì…ì„ ê¸°ë°˜ìœ¼ë¡œ ì ì ˆí•œ ë©”ì‹œì§€ë¥¼ ì‹¤í–‰
- í¼ë¸”ë¦­ ì¸í„°í˜ì´ìŠ¤ì™€ ë©”ì‹œì§€ì˜ ê´€ì ì—ì„œ ë³´ë©´ 'ë©”ì„œë“œ í˜¸ì¶œ'ë³´ë‹¤ëŠ” 'ì˜¤í¼ë ˆì´ì…˜ í˜¸ì¶œ'ì´ ë” ì ì ˆí•œ ìš©ì–´
- ![ë©”ì‹œì§€, ì˜¤í¼ë ˆì´ì…˜, ë©”ì„œë“œ ì‚¬ì´ì˜ ê´€ê³„](image/img_2.png)

### ğŸ”– 6.1.5 ì‹œê·¸ë‹ˆì²˜

- ì‹œê·¸ë‹ˆì²˜: ì˜¤í¼ë ˆì´ì…˜ì˜ ì´ë¦„ê³¼ íŒŒë¼ë¯¸í„° ëª©ë¡ì„ í•©ì¹œ ê²ƒ(ëª…ì„¸)

## ğŸ“– 6.2 ì¸í„°í˜ì´ìŠ¤ì™€ ì„¤ê³„ í’ˆì§ˆ

- ì¢‹ì€ ì¸í„°í˜ì´ìŠ¤: ìµœì†Œí•œì˜ ì¸í„°í˜ì´ìŠ¤ì™€ ì¶”ìƒì ì¸ ì¸í„°í˜ì´ìŠ¤
- ì¢‹ì€ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì„¤ê³„í•˜ê¸° ìœ„í•´ì„  ì±…ì„ ì£¼ë„ ì„¤ê³„ ë°©ë²•ì„ ë”°ë¥¸ë‹¤
- í¼ë¸”ë¦­ ì¸í„°í˜ì´ìŠ¤ í’ˆì§ˆì— ì˜í–¥ì„ ë¯¸ì¹˜ëŠ” ì›ì¹™ê³¼ ê¸°ë²•
    - ë””ë¯¸í„° ë²•ì¹™
    - ë¬»ì§€ ë§ê³  ì‹œì¼œë¼
    - ì˜ë„ë¥¼ ë“œëŸ¬ë‚´ëŠ” ì¸í„°í˜ì´ìŠ¤
    - ëª…ë ¹-ì¿¼ë¦¬ ë¶„ë¦¬

### ğŸ”– 6.2.1 ë””ë¯¸í„° ë²•ì¹™

![ë‚´ë¶€ êµ¬ì¡°ì™€ ê°•í•˜ê²Œ ê²°í•©ë¼ ë³€ê²½ì— ì·¨ì•½í•œ ReservationAgency](image/img_3.png)

- ë””ë¯¸í„° ë²•ì¹™: ê°ì²´ì˜ ë‚´ë¶€ êµ¬ì¡°ì— ê°•í•˜ê²Œ ê²°í•©ë˜ì§€ ì•Šë„ë¡ í˜‘ë ¥ ê²½ë¡œë¥¼ ì œí•œí•˜ë¼ëŠ” ë²•ì¹™
    - ë‹¤ë¥¸ ë§ë¡œëŠ” ë‚¯ì„  ìì—ê²Œ ë§í•˜ì§€ ë§ë¼, ì˜¤ì§ ì¸ì ‘í•œ ì´ì›ƒí•˜ê³ ë§Œ ë§í•˜ë¼, ì˜¤ì§ í•˜ë‚˜ì˜ ë„íŠ¸ë§Œ ì‚¬ìš©í•˜ë¼ ë“±ì´ ìˆìŒ
- í´ë˜ìŠ¤ ë‚´ë¶€ì˜ ë©”ì„œë“œê°€ ë©”ì‹œì§€ë¥¼ ì „ì†¡í•´ë„ ë¬´ë°©í•œ ì¸ìŠ¤í„´ìŠ¤ ëª©ë¡
    - this ê°ì²´
    - ë©”ì„œë“œì˜ ë§¤ê°œë³€ìˆ˜
    - thisì˜ ì†ì„±
    - thisì˜ ì†ì„±ì¸ ì»¬ë ‰ì…˜ì˜ ìš”ì†Œ
    - ë©”ì„œë“œ ë‚´ì—ì„œ ìƒì„±ëœ ì§€ì—­ ê°ì²´
- ì•ˆì¢‹ì€ ReservationAgency ì½”ë“œ

```java
public class ReservationAgency {
    public Reservation reserve(Screening screening, Customer customer, int audienceCount) {
        Movie movie = screening.getMovie();

        boolean discountable = false;
        for (DiscountCondition condition : movie.getDiscountConditions()) {
            if (condition.getType() == DiscountConditionType.PERIOD) {
                ...
            } else {
                ...
            }
        }
    }
}
```

- ìœ„ì˜ ì½”ë“œëŠ” ì¸ìë¡œ ë„˜ê²¨ë°›ì€ screening ì¸ìŠ¤í„´ìŠ¤ì—ì„œ movieë¥¼ êº¼ë‚´ê³  movie ì¸ìŠ¤í„´ìŠ¤ì—ì„œ conditionì„ êº¼ë‚´ëŠ” ë§¤ìš° ê°•í•œ ê²°í•©ë„ë¥¼ ê°€ì§

### ğŸ”– 6.2.2 ë¬»ì§€ ë§ê³  ì‹œì¼œë¼

- í›Œë¥­í•œ ë©”ì‹œì§€ëŠ” ê°ì²´ì˜ ìƒíƒœì— ê´€í•´ ë¬»ì§€ ë§ê³  ì›í•˜ëŠ” ê²ƒì„ ì‹œì¼œì•¼ í•œë‹¤
- ë©”ì‹œì§€ ì „ì†¡ìëŠ” ë©”ì‹œì§€ ìˆ˜ì‹ ìì˜ ìƒíƒœë¥¼ ê¸°ë°˜ìœ¼ë¡œ ê²°ì •ì„ ë‚´ë¦° í›„ ë©”ì‹œì§€ ìˆ˜ì‹ ìì˜ ìƒíƒœë¥¼ ë°”ê¿”ì„œëŠ” ì•ˆëœë‹¤
- ê°ì²´ì§€í–¥ì˜ ê¸°ë³¸ì€ í•¨ê»˜ ë³€ê²½ë  í™•ë¥ ì´ ë†’ì€ ì •ë³´ì™€ í–‰ë™ì„ í•˜ë‚˜ì˜ ë‹¨ìœ„ë¡œ í†µí•©í•˜ëŠ” ê²ƒ
- ë‚´ë¶€ì˜ ìƒíƒœë¥¼ ë¬»ëŠ” ì˜¤í¼ë ˆì´ì…˜ì„ ì¸í„°í˜ì´ìŠ¤ì— í¬í•¨ì‹œí‚¤ê³  ìˆë‹¤ë©´ ë” ë‚˜ì€ ë°©ë²•ì€ ì—†ëŠ”ì§€ ê³ ë¯¼ì´ í•„ìš”

### ğŸ”– 6.2.3 ì˜ë„ë¥¼ ë“œëŸ¬ë‚´ëŠ” ì¸í„°í˜ì´ìŠ¤

```java
public class PeriodCondition {
    public boolean isSatisfiedByPeriod(Screening screening) {
    }

    ;
}

public class SequenceCondition {
    public boolean isSatisfiedBySequence(Screening screening) {
    }

    ;
}
```

- ë©”ì„œë“œë¥¼ ëª…ëª…í•˜ëŠ” ë°©ë²• ì¤‘ ì‘ì—…ì„ ì–´ë–»ê²Œ ìˆ˜í–‰í•˜ëŠ”ì§€ ë‚˜íƒ€ë‚´ëŠ” ìŠ¤íƒ€ì¼ì€ ì¢‹ì§€ ì•Šë‹¤
    - ì´ìœ  1. ë©”ì„œë“œì— ëŒ€í•´ ì œëŒ€ë¡œ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜í•˜ì§€ ëª»í•œë‹¤. í´ë¼ì´ì–¸íŠ¸ ê´€ì ì—ì„œ isSatisfiedByPeriodì™€ isSatisfiedBySequenceëŠ” ëª¨ë‘ í• ì¸ ì¡°ê±´ì„ í• ë‹¹í•˜ëŠ” ë™ì¼ ë¡œì§ì´ë‹¤
      í•˜ì§€ë§Œ ë©”ì„œë“œì˜ ì´ë¦„ì´ ë‹¤ë¥´ê¸°ì— ë‘ ë©”ì„œë“œì˜ ë‚´ë¶€ êµ¬í˜„ì„ ì •í™•íˆ ì´í•´í•˜ì§€ ëª»í•˜ë©´ ë‘ ë©”ì„œë“œê°€ ë™ì¼í•œ ì‘ì—…ì„ ìˆ˜í–‰í•˜ë‹¤ëŠ” ì‚¬ì‹¤ì„ ì•Œì•„ì±„ê¸° ì–´ë µë‹¤.
    - ì´ìœ  2. ë©”ì„œë“œ ìˆ˜ì¤€ì—ì„œ ìº¡ìŠí™”ë¥¼ ìœ„ë°˜í•œë‹¤. í•´ë‹¹ ë©”ì„œë“œë“¤ì€ í´ë¼ì´ì–¸íŠ¸ë¡œ í•˜ì—¬ê¸ˆ í˜‘ë ¥í•˜ëŠ” ê°ì²´ì˜ ì¢…ë¥˜ë¥¼ ì•Œë„ë¡ ê°•ìš”í•œë‹¤. ë§Œì•½ í• ì¸ ì—¬ë¶€ë¥¼ íŒë‹¨í•˜ëŠ” ë°©ë²•ì´
      ë³€ê²½ë˜ë©´ ë©”ì„œë“œì˜ ì´ë¦„ ì—­ì‹œ ë³€ê²½ë˜ë©° ë©”ì‹œì§€ë¥¼ ì „ì†¡í•˜ëŠ” í´ë¼ì´ì–¸íŠ¸ì˜ ì½”ë“œë„ í•¨ê»˜ ë³€ê²½ë¨ì„ ì˜ë¯¸í•œë‹¤. ë”°ë¼ì„œ ì±…ì„ì„ ìˆ˜í–‰í•˜ëŠ” ë°©ë²•ì„ ë“œëŸ¬ë‚´ëŠ” ë©”ì„œë“œë¥¼ ì‚¬ìš©í•œ ì„¤ê³„ëŠ” ë³€ê²½ì— ì·¨ì•½í•´ì§„ë‹¤.

- ë©”ì„œë“œì˜ ì´ë¦„ì„ ì§“ëŠ” ë‘ ë²ˆì§¸ ë°©ë²•ì€ 'ì–´ë–»ê²Œ'ê°€ ì•„ë‹ˆë¼ 'ë¬´ì—‡ì„' í•˜ëŠ”ì§€ë¥¼ ë“œëŸ¬ë‚´ëŠ” ê²ƒ
- ë¬´ì—‡ì„ í•˜ëŠëƒì— ë”°ë¼ ë©”ì„œë“œì˜ ì´ë¦„ì„ ì§“ëŠ” íŒ¨í„´ì„ **ì˜ë„ë¥¼ ë“œëŸ¬ë‚´ëŠ” ì„ íƒì(Intention Revealing Selector)** ë¼ê³  ë¶€ë¦„

> í•˜ë‚˜ì˜ êµ¬í˜„ì„ ê°€ì§„ ë©”ì‹œì§€ì˜ ì´ë¦„ì„ ì¼ë°˜í™”í•˜ë„ë¡ ë„ì™€ì£¼ëŠ” ê°„ë‹¨í•œ í›ˆë ¨ ë°©ë²•ì€ ë§¤ìš° ë‹¤ë¥¸ ë‘ ë²ˆì§¸ êµ¬í˜„ì„ ìƒìƒí•˜ê³  í•´ë‹¹ ë©”ì„œë“œì— ë™ì¼í•œ ì´ë¦„ì„ ë¶™ì—¬ë³´ëŠ” ê²ƒ.
> ê·¸ ìˆœê°„ ìš°ë¦¬ê°€ í•  ìˆ˜ ìˆëŠ” ê°€ì¥ ì¶”ìƒì ì¸ ì´ë¦„ì„ ë©”ì„œë“œì— ë¶™ì¼ ê²ƒì´ë‹¤.

- ê°ì²´ì—ê²Œ ë¬»ì§€ ë§ê³  ì‹œí‚¤ë˜ êµ¬í˜„ ë°©ë²•ì´ ì•„ë‹Œ í´ë¼ì´ì–¸íŠ¸ì˜ ì˜ë„ë¥¼ ë“œëŸ¬ë‚´ëŠ” ê²ƒ ì´ê²ƒì´ ì´í•´í•˜ê¸° ì‰½ê³  ìœ ì—°í•˜ë©° í˜‘ë ¥ì ì¸ ê°ì²´ë¥¼ ë§Œë“œëŠ” ê°€ì¥ ê¸°ë³¸ì ì¸ ìš”êµ¬ì‚¬í•­ì´ë‹¤.

### ğŸ”– 6.2.4 í•¨ê»˜ ëª¨ìœ¼ê¸°

#### ë””ë¯¸í„° ë²•ì¹™ì„ ìœ„ë°˜í•˜ëŠ” í‹°ì¼“ íŒë§¤ ë„ë©”ì¸

```java
public class Theater {
    private TicketSeller ticketSeller;

    public Theater(TicketSeller ticketSeller) {
        this.ticketSeller = ticketSeller;
    }

    public void enter(Audience audience) {
        if (audience.getBag().hasInvitation()) {
            Ticket ticket = ticketSeller.getTicketOffice().getTicket();
            audience.getBag().setTicket(ticket);
        } else {
            Ticket ticket = ticketSeller.getTicketOffice().getTicket();
            audience.getBag().minusAmount(ticket.getFee());
            ticketSeller.getTicketOffice().plusAmount(ticket.getFee());
            audience.getBag().setTicket(ticket);
        }
    }
}
```

- ìœ„ì˜ ì½”ë“œëŠ” Theaterê°€ audienceì™€ ticketSeller ë‚´ë¶€ì— í¬í•¨ëœ ê°ì²´ì—ë„ ì§ì ‘ ì ‘ê·¼í•˜ëŠ” ë¬¸ì œ

```java
// ê¸°ì°¨ ì¶©ëŒ ìŠ¤íƒ€ì¼ì˜ ì „í˜•ì ì¸ ëª¨ìŠµ
audience.getBag().minusAmount(ticket.getFee());
```

#### ë¬»ì§€ ë§ê³  ì‹œì¼œë¼

1. Theaterê°€ TicketSellerì—ê²Œ ìì‹ ì´ ì›í•˜ëŠ” ì¼ì„ ì‹œí‚¤ë„ë¡ ìˆ˜ì •

```java
public class TicketSeller {

    public void setTicket(Audience audience) {
        if (audience.getBag().hasInvitation()) {
            Ticket ticket = ticketOffice.getTicket();
            audience.getBag().setTicket(ticket);
        } else {
            Ticket ticket = ticketOffice.getTicket();
            audience.getBag().minusAmount(ticket.getFee());
            ticketOffice.plusAmount(ticket.getFee());
            audience.getBag().setTicket(ticket);
        }
    }
}

public class Theater {
    private TicketSeller ticketSeller;

    public void enter(Audience audience) {
        ticketSeller.setTicket(audience);
    }
}
```

2. TicketSellerê°€ ì›í•˜ëŠ” ê²ƒì€ Audienceê°€ Ticketì„ ë³´ìœ í•˜ë„ë¡ ë§Œë“œëŠ” ê²ƒ

```java
public class Audience {

    public Long setTicket(Ticket ticket) {
        if (bag.hasInvitation()) {
            bag.setTicket(ticket);
            return 0L;
        } else {
            bag.setTicket(ticket);
            bag.minusAmount(ticket.getFee());
            return ticket.getFee();
        }
    }
}

public class TicketSeller {

    public void setTicket(Audience audience) {
        ticketOffice.plusAmount(audience.setTicket(ticketOffice.getTicket()));
    }
}
```

3. ì•„ì§ Audienceì—ì„œ Bagì—ê²Œ ì›í•˜ëŠ” ì¼ì„ ì‹œí‚¤ê¸° ì „ ìƒíƒœë¥¼ ë¬»ëŠ” ì½”ë“œê°€ ìˆê¸°ì— ì œì™¸

```java
public class Bag {
    
    public Long setTicket(Ticket ticket) {
        if (hasInvitation()) {
            this.ticket = ticket;
            return 0L;
        } else {
            this.ticket = ticket;
            minusAmount(ticket.getFee());
            return ticket.getFee();
        }
    }
}

public class Audience {

    public Long setTicket(Ticket ticket) {
        return bag.setTicket(ticket);
    }
}
```

#### ì¸í„°í˜ì´ìŠ¤ì— ì˜ë„ë¥¼ ë“œëŸ¬ë‚´ì

- ë¯¸ë¬˜í•˜ê²Œ ë‹¤ë¥¸ ì˜ë¯¸ë¥¼ ê°€ì§„ í¼ë¸”ë¦­ ì¸í„°í˜ì´ìŠ¤ëª…ì´ setTicketìœ¼ë¡œ ëª¨ë‘ ë™ì¼í•˜ì—¬ í´ë¼ì´ì–¸íŠ¸ì— í˜¼ë€ì„ ì¤Œ
- TheaterëŠ” Audienceì—ê²Œ í‹°ì¼“ì„ íŒë§¤í•˜ë¼ëŠ” ì˜ë¯¸ê¸°ì— sellTo
- TicketSellerê°€ Audienceì—ê²Œ ì›í•˜ëŠ” ë©”ì‹œì§€ëŠ” buy
- Audienceê°€ Bagì—ê²Œ ì›í•˜ëŠ” ë©”ì‹œì§€ëŠ” hold

```java
public class TicketSeller {
  public void sellTo(Audience audience) {};
}

public class Audience {
  public Long buy(Ticket ticket) {};
}

public class Bag {
  public Long hold(Ticket ticket) {};
}
```

## ğŸ“– 6.3 ì›ì¹™ì˜ í•¨ì •

- ì„¤ê³„ëŠ” íŠ¸ë ˆì´ë“œ ì˜¤í”„ì˜ ì‚°ë¬¼ì´ê¸°ì— ì›ì¹™ì´ í˜„ì¬ ìƒí™©ì— ë¶€ì í•©í•˜ë‹¤ íŒë‹¨ëœë‹¤ë©´ ê³¼ê°íˆ ì›ì¹™ì„ ë¬´ì‹œí•˜ë¼
- ì›ì¹™ì„ ì•„ëŠ” ê²ƒë³´ë‹¤ ì›ì¹™ì´ ì–¸ì œ ìœ ìš©í•˜ê³  ì•„ë‹Œì§€ë¥¼ íŒë‹¨í•˜ëŠ” ëŠ¥ë ¥ì´ ë” ì¤‘ìš”í•˜ë‹¤

### ğŸ”– 6.3.1 ë””ë¯¸í„° ë²•ì¹™ì€ í•˜ë‚˜ì˜ ë„íŠ¸ë¥¼ ê°•ì œí•˜ëŠ” ê·œì¹™ì´ ì•„ë‹ˆë‹¤

- ëŒ€í‘œì ìœ¼ë¡œ ìë°” Streamì˜ ê²½ìš° ë™ì¼í•œ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°˜í™˜í•˜ê¸°ì— ë””ë¯¸í„° ë²•ì¹™ì„ ìœ„ë°˜í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë‹¤
- ë””ë¯¸í„° ë²•ì¹™ì€ ê²°í•©ë„ì™€ ê´€ë ¨ëœ ê²ƒì´ë©°, ê°ì²´ì˜ ë‚´ë¶€ êµ¬ì¡°ê°€ ì™¸ë¶€ë¡œ ë…¸ì¶œë˜ëŠ” ê²ƒì— í•œì •

### ğŸ”– 6.3.2 ê²°í•©ë„ì™€ ì‘ì§‘ë„ì˜ ì¶©ëŒ

- ëª¨ë“  ìƒí™©ì—ì„œ ë§¹ëª©ì ìœ¼ë¡œ ìœ„ì„ ë©”ì„œë“œë¥¼ ì¶”ê°€í•˜ë©´ ê°ì²´ëŠ” ìƒê´€ ì—†ëŠ” ì±…ì„ë“¤ì„ í•œêº¼ë²ˆì— ë– ì•ˆì•„ ì‘ì§‘ë„ê°€ ë‚®ì•„ì§€ëŠ” ê²°ê³¼ë¥¼ ì´ˆë˜í•  ìˆ˜ ìˆë‹¤

1. ì˜í™” ì˜ˆë§¤ ì‹œìŠ¤í…œ PeriodCondition
```java
public class PeriodCondition implements DiscountCondition {

  public boolean isSatisfiedBy(Screening screening) {
    return screening.getStartTime().getDayOfWeek().equals(dayOfWeek) &&
            startTime.compareTo(screening.getStartTime().toLocalTime()) <= 0 &&
            endTime.compareTo(screening.getStartTime().toLocalTime()) >= 0;
  }
}
```
2. Screeningì˜ ë‚´ë¶€ ìƒíƒœë¥¼ ê°€ì ¸ì™€ì„œ ì‚¬ìš©í•œë‹¤ê³  íŒë‹¨í•˜ì—¬ ë¡œì§ì„ ì˜®ê¸°ë©´ ë‹¤ìŒê³¼ ê°™ì´ ëœë‹¤.
```java
public class Screening {
  public boolean isDiscountable(Screening screening) {
    return whenScreened.getDayOfWeek().equals(dayOfWeek) &&
            startTime.compareTo(whenScreened.toLocalTime()) <= 0 &&
            endTime.compareTo(whenScreened.toLocalTime()) >= 0;
  }
}

public class PeriodCondition implements DiscountCondition {

  public boolean isSatisfiedBy(Screening screening) {
    return screening.isDiscountable(dayOfWeek, startTime, endTime);
  }
}
```
- ìœ„ì˜ ì½”ë“œê°€ ë˜ë©´ Screeningì´ ê¸°ê°„ì— ë”°ë¥¸ í• ì¸ ì¡°ê±´ì„ íŒë‹¨í•˜ëŠ” ì±…ì„ì„ ë– ì•ˆê²Œ ë¨
- ê·¸ë ‡ê¸°ì— ë‚´ë¶€ êµ¬í˜„ì„ ê°ì¶° Screeningì˜ ìº¡ìŠí™”ë¥¼ í–¥ìƒì‹œí‚¤ëŠ” ê²ƒë³´ë‹¤ Screeningì˜ ì‘ì§‘ë„ë¥¼ ë†’ì´ê³  PeriodCondition ì‚¬ì´ì˜ ê²°í•©ë„ë¥¼ ë‚®ì¶”ëŠ” ê²ƒì´ ë” ì¢‹ì€ ë°©ë²•
-  ì†Œí”„íŠ¸ì›¨ì–´ ì„¤ê³„ì— ì¡´ì¬í•˜ëŠ” ëª‡ ì•ˆë˜ëŠ” ë²•ì¹™ ì¤‘ í•˜ë‚˜ **"ê²½ìš°ì— ë”°ë¼ ë‹¤ë¥´ë‹¤"**

## ğŸ“– 6.4 ëª…ë ¹-ì¿¼ë¦¬ ë¶„ë¦¬ ì›ì¹™

- ë£¨í‹´: ì–´ë–¤ ì ˆì°¨ë¥¼ ë¬¶ì–´ í˜¸ì¶œ ê°€ëŠ¥í•˜ë„ë¡ ì´ë¦„ì„ ë¶€ì—¬í•œ ê¸°ëŠ¥ ëª¨ë“ˆ
- í”„ë¡œì‹œì €(ëª…ë ¹): ì •í•´ì§„ ì ˆì°¨ì— ë”°ë¼ ë‚´ë¶€ì˜ ìƒíƒœë¥¼ ë³€ê²½í•˜ëŠ” ë£¨í‹´ì˜ í•œ ì¢…ë¥˜. ë¶€ìˆ˜íš¨ê³¼ë¥¼ ë°œìƒì‹œí‚¬ ìˆ˜ ìˆì§€ë§Œ ê°’ì„ ë°˜í™˜í•  ìˆ˜ ì—†ë‹¤.
- í•¨ìˆ˜(ì¿¼ë¦¬): ì ˆì°¨ì— ë”°ë¼ í•„ìš”í•œ ê°’ì„ ê³„ì‚°í•´ì„œ ë°˜í™˜í•˜ëŠ” ë£¨í‹´ì˜ í•œ ì¢…ë¥˜. ê°’ì„ ë°˜í™˜í•  ìˆ˜ ìˆì§€ë§Œ ë¶€ìˆ˜íš¨ê³¼ë¥¼ ë°œìƒì‹œí‚¬ ìˆ˜ ì—†ë‹¤.
- ëª…ë ¹-ì¿¼ë¦¬ ë¶„ë¦¬ ì›ì¹™ì— ë”°ë¼ ì‘ì„±ëœ ê°ì²´ì˜ ì¸í„°í˜ì´ìŠ¤ë¥¼ ëª…ë ¹-ì¿¼ë¦¬ ì¸í„°í˜ì´ìŠ¤ë¼ í•¨

### ğŸ”– 6.4.1 ë°˜ë³µ ì¼ì •ì˜ ëª…ë ¹ê³¼ ì¿¼ë¦¬ ë¶„ë¦¬í•˜ê¸°

```java
public class Event {
    private String subject;
    private LocalDateTime from;
    private Duration duration;

    public boolean isSatisfied(RecurringSchedule schedule) {
        if (from.getDayOfWeek() != schedule.getDayOfWeek() ||
                !from.toLocalTime().equals(schedule.getFrom()) ||
                !duration.equals(schedule.getDuration())) {
            reschedule(schedule);
            return false;
        }

        return true;
    }

    private void reschedule(RecurringSchedule schedule) {
        from = LocalDateTime.of(from.toLocalDate().plusDays(daysDistance(schedule)),
                schedule.getFrom());
        duration = schedule.getDuration();
    }

    private long daysDistance(RecurringSchedule schedule) {
        return schedule.getDayOfWeek().getValue() - from.getDayOfWeek().getValue();
    }
}
```
```java
@Getter
public class RecurringSchedule {
  private String subject;
  private DayOfWeek dayOfWeek;
  private LocalDateTime from;
  private Duration duration;
}
```

- isSatisfied ë©”ì„œë“œë¥¼ ì‚´í´ë³´ë©´ Eventê°€ RecurringSchedule ì¡°ê±´ì— ë¶€í•©í•˜ëŠ”ì§€ íŒë‹¨í•˜ê³  booleanì„ ë°˜í™˜í•˜ëŠ” ê°œë…ì ìœ¼ë¡œ ì¿¼ë¦¬ë‹¤
- í•˜ì§€ë§Œ Eventê°€ RecurringScheduleì˜ ì¡°ê±´ì— ë¶€í•©í•˜ì§€ ì•Šì„ ê²½ìš° Eventì˜ ìƒíƒœë¥¼ ì¡°ê±´ì— ë¶€í•©í•˜ë„ë¡ ë³€ê²½í•˜ëŠ” ë¶€ìˆ˜íš¨ê³¼ë¥¼ ê°€ì§€ëŠ” ëª…ë ¹ì´ë‹¤
- ìµœì´ˆ êµ¬í˜„ì‹œ reschedule ë©”ì„œë“œ í˜¸ì¶œì„ ì—†ì—ˆìœ¼ë‚˜ ìš”êµ¬ì‚¬í•­ì´ ì¶”ê°€ë˜ì–´ ê°œë°œìê°€ ë³„ ìƒê°ì—†ì´ ê¸°ì¡´ì— ìˆë˜ isSatisfied ë©”ì„œë“œì— í˜¸ì¶œí•˜ë„ë¡ ë³€ê²½í–ˆë‹¤ëŠ” ì˜ˆì‹œ
- ìœ„ì˜ ì½”ë“œ ì˜ˆì‹œì²˜ëŸ¼ ëª…ë ¹ê³¼ ì¿¼ë¦¬ë¥¼ ë’¤ì„ìœ¼ë©´ ì‹¤í–‰ ê²°ê³¼ë¥¼ ì˜ˆì¸¡í•˜ê¸° ì–´ë ¤ì›Œì ¸ í”„ë¡œê·¸ë¨ì— ë²„ê·¸ë¥¼ ë°œìƒì‹œí‚¤ëŠ” ì¹˜ëª…ì  ì›ì¸ì´ ë  ìˆ˜ ìˆë‹¤.
- reschedule ë©”ì„œë“œë¥¼ publicìœ¼ë¡œ ë³€ê²½í•˜ì—¬ ëª…ë ¹ê³¼ ì¿¼ë¦¬ë¥¼ ëª…í™•íˆ ë¶„ë¦¬í•  ìˆ˜ ìˆë‹¤

### ğŸ”– 6.4.2 ëª…ë ¹-ì¿¼ë¦¬ ë¶„ë¦¬ì™€ ì°¸ì¡° íˆ¬ëª…ì„±

- ëª…ë ¹ê³¼ ì¿¼ë¦¬ë¥¼ ì—„ê²©íˆ ë¶„ë¥˜í•˜ë©´ ì¿¼ë¦¬ì˜ ê²°ê³¼ë¥¼ ì˜ˆì¸¡í•˜ê¸° ì‰¬ì›Œì§€ê³  ì¿¼ë¦¬ì˜ ìˆœì„œë¥¼ ììœ ë¡­ê²Œ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.
- ëª…ë ¹ê³¼ ì¿¼ë¦¬ë¥¼ ë¶„ë¦¬í•¨ìœ¼ë¡œì¨ ëª…ë ¹í˜• ì–¸ì–´ì˜ í‹€ì•ˆì—ì„œ ì°¸ì¡° íˆ¬ëª…ì„±ì˜ ì¥ì ì„ ì œí•œì ì´ë‚˜ë§ˆ ëˆ„ë¦´ ìˆ˜ ìˆë‹¤.
- ì»´í“¨í„°ì˜ ì„¸ê³„ì™€ ìˆ˜í•™ì˜ ì„¸ê³„ë¥¼ ë‚˜ëˆ„ëŠ” ê°€ì¥ í° íŠ¹ì§•ì€ ë¶€ìˆ˜íš¨ê³¼(side effect)ì˜ ì¡´ì¬ ìœ ë¬´
- ìˆ˜í•™ì˜ ê²½ìš° x ê°’ì„ ì´ˆê¸°í™”í•œ í›„ ê°’ì„ ë³€ê²½í•˜ëŠ” ê²ƒì´ ë¶ˆê°€ëŠ¥í•˜ì§€ë§Œ í”„ë¡œê·¸ë¨ì—ì„œëŠ” ê°€ëŠ¥í•˜ë‹¤
- ì°¸ì¡° íˆ¬ëª…ì„±: ì–´ë–¤ í‘œí˜„ì‹ eê°€ ìˆì„ ë•Œ eì˜ ê°’ìœ¼ë¡œ eê°€ ë‚˜íƒ€ë‚˜ëŠ” ëª¨ë“  ìœ„ì¹˜ë¥¼ êµì²´í•˜ë”ë¼ë„ ê²°ê³¼ê°€ ë‹¬ë¼ì§€ì§€ ì•ŠëŠ” íŠ¹ì„±
- ì°¸ì¡° íˆ¬ëª…ì„±ì´ ì œê³µí•˜ëŠ” ì¥ì 
  - ëª¨ë“  í•¨ìˆ˜ë¥¼ ì´ë¯¸ ì•Œê³  ìˆëŠ” í•˜ë‚˜ì˜ ê²°ê³¼ê°’ìœ¼ë¡œ ëŒ€ì²´í•  ìˆ˜ ìˆê¸°ì— ì‰½ê²Œ ê³„ì‚°í•  ìˆ˜ ìˆë‹¤
  - ëª¨ë“  ê³³ì—ì„œ í•¨ìˆ˜ì˜ ê²°ê³¼ê°’ì´ ë™ì¼í•˜ê¸° ë•Œë¬¸ì— ì‹ì˜ ìˆœì„œë¥¼ ë³€ê²½í•˜ë”ë¼ë„ ê° ì‹ì˜ ê²°ê³¼ëŠ” ë‹¬ë¼ì§€ì§€ ì•ŠëŠ”ë‹¤.


