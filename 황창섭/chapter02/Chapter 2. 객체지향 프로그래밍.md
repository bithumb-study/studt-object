# ğŸ“š 2ì¥ ê°ì²´ì§€í–¥ í”„ë¡œê·¸ë˜ë°

## ğŸ“– 2.1 ì˜í™” ì˜ˆë§¤ ì‹œìŠ¤í…œ

ìš”êµ¬ì‚¬í•­ ì‚´í´ë³´ê¸°

- ì˜í™”: ì˜í™”ì— ëŒ€í•œ ê¸°ë³¸ ì •ë³´
- ìƒì˜: ê´€ê°ë“¤ì´ ì˜í™”ë¥¼ ê´€ëŒí•˜ëŠ” ì‚¬ê±´
- í• ì¸ ì¡°ê±´: í• ì¸ ì—¬ë¶€ë¥¼ ê²°ì •
    - ìˆœì„œ ì¡°ê±´: ìƒì˜ ìˆœë²ˆì„ ì´ìš©í•´ í• ì¸ ì—¬ë¶€ë¥¼ ê²°ì •í•˜ëŠ” ê·œì¹™
    - ê¸°ê°„ ì¡°ê±´: ìƒì˜ ì‹œì‘ ì‹œê°„ì„ ì´ìš©í•´ í• ì¸ ì—¬ë¶€ë¥¼ ê²°ì •í•˜ëŠ” ê·œì¹™
- í• ì¸ ì •ì±…: í• ì¸ ìš”ê¸ˆì„ ê²°ì •
    - ê¸ˆì•¡ í• ì¸ ì •ì±…: ì˜ˆë§¤ ìš”ê¸ˆì—ì„œ ì¼ì • ê¸ˆì•¡ì„ í• ì¸í•´ì£¼ëŠ” ë°©ì‹
    - ë¹„ìœ¨ í• ì¸ ì •ì±…: ì •ê°€ì—ì„œ ì¼ì • ë¹„ìœ¨ì˜ ìš”ê¸ˆì„ í• ì¸í•´ ì£¼ëŠ” ë°©ì‹

í• ì¸ ì •ì±…ê³¼ í• ì¸ ì¡°ê±´ì´ ì§€ì •ëœ ì˜í™” ì˜ˆì‹œ
![image1](image/í• ì¸ ì •ì±…ê³¼ í• ì¸ ì¡°ê±´.png)

ì˜ˆë§¤ ì™„ë£Œì‹œ ìƒì„±í•˜ëŠ” ì˜ˆë§¤ ì •ë³´
![image2](image/ì˜ˆë§¤ ì •ë³´.png)

## ğŸ“– 2.2 ê°ì²´ì§€í–¥ í”„ë¡œê·¸ë˜ë°ì„ í–¥í•´

### ğŸ”– 2.2.1 í˜‘ë ¥, ê°ì²´, í´ë˜ìŠ¤

ê°ì²´ì§€í–¥ ì–¸ì–´ì— ìµìˆ™í•œ ì‚¬ëŒì´ë¼ë©´ ì–´ë–¤ í´ë˜ìŠ¤ê°€ í•„ìš”í•œì§€ ê³ ë¯¼í•˜ì§€ë§Œ ì´ëŠ” **ê°ì²´ì§€í–¥ì˜ ë³¸ì§ˆê³¼ëŠ” ê±°ë¦¬ê°€ ë©€ë‹¤**
ê°ì²´ì§€í–¥ íŒ¨ëŸ¬ë‹¤ì„ìœ¼ë¡œì˜ ì „í™˜ì€ í´ë˜ìŠ¤ê°€ ì•„ë‹Œ ê°ì²´ì— ì´ˆì ì„ ë§ì¶œ ë•Œ ì–»ìŒ

1. ì–´ë–¤ í´ë˜ìŠ¤ê°€ í•„ìš”í•œì§€ë¥¼ ê³ ë¯¼í•˜ê¸° ì „ì— ì–´ë–¤ ê°ì²´ë“¤ì´ í•„ìš”í•œì§€ ê³ ë¯¼í•˜ë¼. í´ë˜ìŠ¤ëŠ” ê³µí†µì ì¸ ìƒíƒœì™€ í–‰ë™ì„ ê³µìœ í•˜ëŠ” ê°ì²´ë“¤ì„ ì¶”ìƒí™”í•œ ê²ƒ. ì´ëŠ” ì„¤ê³„ë¥¼ ë‹¨ìˆœí•˜ê³  ê¹”ë”í•˜ê²Œ ë§Œë“ ë‹¤.
2. ê°ì²´ë¥¼ ë…ë¦½ì ì¸ ì¡´ì¬ê°€ ì•„ë‹ˆë¼ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ê¸° ìœ„í•´ í˜‘ë ¥í•˜ëŠ” ê³µë™ì²´ì˜ ì¼ì›ìœ¼ë¡œ ë´ì•¼ í•œë‹¤. ê°ì²´ë¥¼ í˜‘ë ¥í•˜ëŠ” ê³µë™ì²´ì˜ ì¼ì›ìœ¼ë¡œ ë°”ë¼ë³´ëŠ” ê²ƒì€ ì„¤ê³„ë¥¼ ìœ ì—°í•˜ê³  í™•ì¥ ê°€ëŠ¥í•˜ê²Œ ë§Œë“ ë‹¤.

### ğŸ”– 2.2.2 ë„ë©”ì¸ì˜ êµ¬ì¡°ë¥¼ ë”°ë¥´ëŠ” í”„ë¡œê·¸ë¨ êµ¬ì¡°

- ë„ë©”ì¸ì´ë€? ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ì‚¬ìš©ìê°€ í”„ë¡œê·¸ë¨ì„ ì‚¬ìš©í•˜ëŠ” ë¶„ì•¼
- ê°ì²´ì§€í–¥ íŒ¨ëŸ¬ë‹¤ì„ì´ ê°•ë ¥í•œ ì´ìœ ëŠ” ìš”êµ¬ì‚¬í•­ì„ ë¶„ì„í•˜ëŠ” ì´ˆê¸° ë‹¨ê³„ë¶€í„° í”„ë¡œê·¸ë¨ì„ êµ¬í˜„í•˜ëŠ” ë§ˆì§€ë§‰ ë‹¨ê³„ê¹Œì§€ ê°ì²´ë¼ëŠ” ë™ì¼í•œ ì¶”ì‚¬í•­í™” ê¸°ë²•ì„ ì‚¬ìš©í•  ìˆ˜ ìˆê¸° ë•Œë¬¸
- ìš”êµ¬ì‚¬í•­ê³¼ í”„ë¡œê·¸ë¨ì„ ê°ì²´ë¼ëŠ” ë™ì¼í•œ ê´€ì ì—ì„œ ë°”ë¼ë´„

ì˜í™” ì˜ˆë§¤ ë„ë©”ì¸
![image3](image/ì˜í™” ì˜ˆë§¤ ë„ë©”ì¸.png)
![image4](image/ì˜í™” ì˜ˆë§¤ ë„ë©”ì¸2.png)

### ğŸ”– 2.2.3 í´ë˜ìŠ¤ êµ¬í˜„í•˜ê¸°

```java
package chapter2;

import lombok.AllArgsConstructor;

import java.time.LocalDateTime;

@AllArgsConstructor
public class Screening {
    private Movie movie;
    private int sequence;
    private LocalDateTime whenScreened;

    public LocalDateTime getStartTime() {
        return whenScreened;
    }

    public boolean isSequence(int sequence) {
        return this.sequence == sequence;
    }

    public Money getMovieFee() {
        return movie.getFee();
    }

}
```

**ììœ¨ì ì¸ ê°ì²´**

- ê°ì²´ëŠ” ìƒíƒœì™€ í–‰ë™ì„ í•¨ê»˜ ê°€ì§€ëŠ” ë³µí•©ì ì¸ ì¡´ì¬
- ê°ì²´ê°€ ìŠ¤ìŠ¤ë¡œ íŒë‹¨í•˜ê³  í–‰ë™í•˜ëŠ” ììœ¨ì ì¸ ì¡´ì¬
- ê°ì²´ì§€í–¥ íŒ¨ëŸ¬ë‹¤ì„ì—ì„  ë°ì´í„°ì™€ ê¸°ëŠ¥ì„ í•œ ë©ì–´ë¦¬ë¡œ ë¬¶ìŒ(**ìº¡ìŠí™”**)ìœ¼ë¡œì¨ ë¬¸ì œ ì˜ì—­ì˜ ì•„ì´ë””ì–´ë¥¼ ì ì ˆí•˜ê²Œ í‘œí˜„
- ê°ì²´ì˜ ì ‘ê·¼ ì œì–´ìëŠ” ê°ì²´ë¥¼ ììœ¨ì ì¸ ì¡´ì¬ë¡œ ë§Œë“¤ê¸° ìœ„í•´ ì™¸ë¶€ ê°„ì„­ì„ ìµœì†Œí™”í•¨. ê°ì²´ê°€ ì›í•˜ëŠ” ê²ƒì„ ìš”ì²­í•˜ê³  ê°ì²´ê°€ ìµœì„ ì˜ ë°©ë²•ì„ ê²°ì •í•  ìˆ˜ ìˆì„ ê²ƒì´ë¼ ë¯¿ê³  ê¸°ë‹¤ë¦¼
- ì™¸ë¶€ì—ì„œ ì ‘ê·¼ ê°€ëŠ¥í•œ **í¼ë¸”ë¦­ ì¸í„°í˜ì´ìŠ¤**ì™€ ë‚´ë¶€ì—ì„œë§Œ ì ‘ê·¼ ê°€ëŠ¥í•œ **êµ¬í˜„**ìœ¼ë¡œ ë‚˜ëˆ”

**í”„ë¡œê·¸ë˜ë¨¸ì˜ ììœ **

- í”„ë¡œê·¸ë˜ë¨¸ ì—­í• ì„ í´ë˜ìŠ¤ ì‘ì„±ìì™€ í´ë¼ì´ì–¸íŠ¸ í”„ë¡œê·¸ë˜ë¨¸ë¡œ êµ¬ë¶„í•˜ëŠ” ê²ƒì´ ìœ ìš©[Eckel06]
- í´ë¼ì´ì–¸íŠ¸ í”„ë¡œê·¸ë˜ë¨¸ì˜ ëª©í‘œëŠ” í•„ìš”í•œ í´ë˜ìŠ¤ë“¤ì„ ì—®ì–´ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë¹ ë¥´ê³  ì•ˆì •ì •ìœ¼ë¡œ êµ¬ì¶•
- í´ë˜ìŠ¤ ì‘ì„±ìëŠ” í•„ìš”í•œ ë¶€ë¶„ë§Œì„ ê³µê°œí•˜ê³  ë‚˜ë¨¸ì§€ë¥¼ ìˆ¨ê²¨ ë‚´ë¶€ êµ¬í˜„ì„ ë³€ê²½(**êµ¬í˜„ ì€ë‹‰**)
- ì„¤ê³„ê°€ í•„ìš”í•œ ì´ë‰´ëŠ” ë³€ê²½ì„ ê´€ë¦¬í•˜ê¸° ìœ„í•¨

### ğŸ”– 2.2.4 í˜‘ë ¥í•˜ëŠ” ê°ì²´ë“¤ì˜ ê³µë™ì²´

```java
package chapter2;

import lombok.AllArgsConstructor;

import java.time.LocalDateTime;

@AllArgsConstructor
public class Screening {
    private Movie movie;
    private int sequence;
    private LocalDateTime whenScreened;

    public LocalDateTime getStartTime() {
        return whenScreened;
    }

    public boolean isSequence(int sequence) {
        return this.sequence == sequence;
    }

    public Money getMovieFee() {
        return movie.getFee();
    }

    public Reservation reserve(Customer customer, int audienceCount) {
        return new Reservation(customer, this, calculateFee(audienceCount), audienceCount);
    }

    private Money caculateFee(int audienceCount) {
        return movie.calculateMovieFee(this).times(audienceCount);
    }

}
```

```java
package chapter2;

import lombok.AllArgsConstructor;

import java.math.BigDecimal;

@AllArgsConstructor
public class Money {
    public static final Money ZERO = Money.wons(0);

    private final BigDecimal amount;

    public static Money wons(long amount) {
        return new Money(BigDecimal.valueOf(amount));
    }

    public static Money wons(double amount) {
        return new Money(BigDecimal.valueOf(amount));
    }

    public Money plus(Money amount) {
        return new Money(this.amount.add(amount.amount));
    }

    public Money minus(Money amount) {
        return new Money(this.amount.subtract(amount.amount));
    }

    public Money times(double percent) {
        return new Money(this.amount.multiply(BigDecimal.valueOf(percent)));
    }

    public boolean isLessThan(Money other) {
        return amount.compareTo(other.amount) < 0;
    }

    public boolean isGreaterThanOrEqual(Money other) {
        return amount.compareTo(other.amount) >= 0;
    }

}

```

```java
package chapter2;

import lombok.AllArgsConstructor;

@AllArgsConstructor
public class Reservation {
    private Customer customer;
    private Screening screening;
    private Money fee;
    private int audienceCount;

}

```

- ì˜í™”ë¥¼ ì˜ˆë§¤í•˜ê¸° ìœ„í•´ Screening, Move, Reservation ì¸ìŠ¤í„´ìŠ¤ë“¤ì€ ì„œë¡œì˜ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©° ìƒí˜¸ì‘ìš©(**í˜‘ë ¥**)
  ![image5](image/ê°ì²´ë“¤ì˜í˜‘ë ¥.png)

### ğŸ”– 2.2.5 í˜‘ë ¥ì— ê´€í•œ ì§§ì€ ì´ì•¼ê¸°

- ê°ì²´ëŠ” ë‹¤ë¥¸ ê°ì²´ì˜ ì¸í„°í˜ì´ìŠ¤ì— ê³µê°œëœ í–‰ë™ì„ ìˆ˜í–‰í•˜ë„ë¡ ìš”ì²­(request) í•˜ë©° ìš”ì²­ì„ ë°›ì€ ê°ì²´ëŠ” ìš”ì²­ì„ ì²˜ë¦¬í•œ í›„ ì‘ë‹µ(response)í•œë‹¤.
- ê°ì²´ê°€ ë‹¤ë¥¸ ê°ì²´ì™€ ìƒí˜¸ì‘ìš©í•  ìˆ˜ ìˆëŠ” ìœ ì¼í•œ ë°©ë²•ì€ ë©”ì„¸ì§€ë¥¼ ì „ì†¡(send a message)í•˜ëŠ” ê²ƒ ë¿ì´ê³  ë©”ì‹œì§€ë¥¼ ìˆ˜ì‹ í•œ ê°ì²´ëŠ” ìŠ¤ìŠ¤ë¡œì˜ ê²°ì •ì— ë”°ë¼ ììœ¨ì ìœ¼ë¡œ ë©”ì„¸ì§€ë¥¼ ì²˜ë¦¬í•  ë°©ë²•(**ë©”ì„œë“œ**)ì„ ê²°ì •
- ë©”ì‹œì§€ì™€ ë©”ì„œë“œë¥¼ êµ¬ë¶„í•˜ëŠ” ê²ƒì€ ë§¤ìš° ì¤‘ìš”í•˜ë©° ì´ êµ¬ë¶„ì—ì„œ **ë‹¤í˜•ì„±(polymorphism)** ê°œë…ì´ ì¶œë°œí•œë‹¤

## ğŸ“– 2.3 í• ì¸ ìš”ê¸ˆ êµ¬í•˜ê¸°

### ğŸ”– 2.3.1 í• ì¸ ìš”ê¸ˆ ê³„ì‚°ì„ ìœ„í•œ í˜‘ë ¥ ì‹œì‘í•˜ê¸°

```java
package chapter2;

import lombok.AllArgsConstructor;

import java.time.Duration;

@AllArgsConstructor
public class Movie {
    private String title;
    private Duration runningTime;
    private Money fee;
    private DiscountPolicy discountPolicy;

    public Money getFee() {
        return fee;
    }

    public Money calculateMovieFee(Screening screening) {
        return fee.minus(discountPolicy.calculateDiscountAmount(screening));
    }
}

```

- calculateMovieFee ë©”ì„œë“œì—ì„œ ì–´ë–¤ í• ì¸ ì •ì±…ì„ ì‚¬ìš©í•  ê²ƒì¸ì§€ ê²°ì •í•˜ëŠ” ì½”ë“œëŠ” ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©°, ë‹¨ì§€ discountPolicyì—ê²Œ ë©”ì‹œì§€ë¥¼ ì „ì†¡
- ì´ ì½”ë“œì—ëŠ” **ìƒì†**ê³¼ **ë‹¤í˜•ì„±**ì˜ ê°œë…ì´ ìˆ¨ê²¨ì ¸ ìˆìœ¼ë©° **ì¶”ìƒí™”**ë¼ëŠ” ì›ë¦¬ê°€ ìˆ¨ê²¨ì ¸ìˆë‹¤.

### ğŸ”– 2.3.2 í• ì¸ ì •ì±…ê³¼ í• ì¸ ì¡°ê±´

```java
package chapter2;

import java.util.List;

public abstract class DiscountPolicy {
    private List<DiscountCondition> conditions;

    public DiscountPolicy(DiscountCondition... conditions) {
        this.conditions = List.of(conditions);
    }

    public Money calculateDiscountAmount(Screening screening) {
        for (DiscountCondition condition : conditions) {
            if (condition.isSatisfiedBy(screening)) {
                return getDiscountAmount(screening);
            }
        }

        return Money.ZERO;
    }

    abstract protected Money getDiscountAmount(Screening screening);
}

```

- ë¶€ëª¨ í´ë˜ìŠ¤ì— ê¸°ë³¸ì ì¸ ì•Œê³ ë¦¬ì¦˜ì˜ íë¦„ì„ êµ¬í˜„í•˜ê³  ì¤‘ê°„ì— í•„ìš”í•œ ì²˜ë¦¬ë¥¼ ìì‹ í´ë˜ìŠ¤ì—ê²Œ ìœ„ì„í•˜ëŠ” ë””ìì¸ íŒ¨í„´ì„ TEMPLATE METHOD íŒ¨í„´[GOF94]ë¼ê³  í•¨

```java
package chapter2;

import java.util.List;

public abstract class DiscountPolicy {
    private List<DiscountCondition> conditions;

    public DiscountPolicy(DiscountCondition... conditions) {
        this.conditions = List.of(conditions);
    }

    public Money calculateDiscountAmount(Screening screening) {
        for (DiscountCondition condition : conditions) {
            if (condition.isSatisfiedBy(screening)) {
                return getDiscountAmount(screening);
            }
        }

        return Money.ZERO;
    }

    abstract protected Money getDiscountAmount(Screening screening);
}

```

```java
package chapter2;

public interface DiscountCondition {
    boolean isSatisfiedBy(Screening screening);
}

```

```java
package chapter2;

import lombok.AllArgsConstructor;

@AllArgsConstructor
public class SequenceCondition implements DiscountCondition {
    private int sequence;

    @Override
    public boolean isSatisfiedBy(Screening screening) {
        return screening.isSequence(sequence);
    }
}

```

```java
package chapter2;

import lombok.AllArgsConstructor;

import java.time.DayOfWeek;
import java.time.LocalTime;

@AllArgsConstructor
public class PeriodCondition implements DiscountCondition {
    private DayOfWeek dayOfWeek;
    private LocalTime startTime;
    private LocalTime endTime;

    public boolean isSatisfiedBy(Screening screening) {
        return screening.getStartTime().getDayOfWeek().equals(dayOfWeek) &&
                startTime.compareTo(screening.getStartTime().toLocalTime()) <= 0 &&
                endTime.compareTo(screening.getStartTime().toLocalTime()) >= 0;
    }
}

```

```java
package chapter2;

public class AmountDiscountPolicy extends DiscountPolicy {
    private Money discountAmount;

    public AmountDiscountPolicy(Money discountAmount, DiscountCondition... conditions) {
        super(conditions);
        this.discountAmount = discountAmount;
    }

    @Override
    protected Money getDiscountAmount(Screening screening) {
        return discountAmount;
    }
}

```

```java
package chapter2;

public class PercentDiscountPolicy extends DiscountPolicy {
    private double percent;

    public PercentDiscountPolicy(double percent, DiscountCondition... conditions) {
        super(conditions);
        this.percent = percent;
    }

    @Override
    protected Money getDiscountAmount(Screening screening) {
        return screening.getMovieFee().times(percent);
    }
}

```

### ğŸ”– 2.3.3 í• ì¸ ì •ì±… êµ¬ì„±í•˜ê¸°

- ìš”êµ¬ì‚¬í•­: í•˜ë‚˜ì˜ ì˜í™”ì— ëŒ€í•´ ë‹¨ í•˜ë‚˜ì˜ í• ì¸ ì •ì±…ë§Œ ì„¤ì •í•  ìˆ˜ ìˆì§€ë§Œ í• ì¸ ì¡°ê±´ì˜ ê²½ìš° ì—¬ëŸ¬ ê°œë¥¼ ì ìš©í•  ìˆ˜ ìˆìŒ

```java
// ì˜í™” ê°ì²´ ìƒì„±
Movie avatar=new Movie("ì•„ë°”íƒ€",
        Duration.ofMinutes(120),
        Money.wons(10000),
        new AmountDiscountPolicy(Money.wons(800),
        new SequenceCondition(1),
        new SequenceCondition(10),
        new PeriodCondition(DayOfWeek.MONDAY,LocalTime.of(10,0),LocalTime.of(11,59)),
        new PeriodCondition(DayOfWeek.THURSDAY,LocalTime.of(10,0),LocalTime.of(20,59))
        ));

        Movie titanic=new Movie("íƒ€ì´íƒ€ë‹‰",
        Duration.ofMinutes(180),
        Money.wons(11000),
        new PercentDiscountPolicy(0.1,
        new PeriodCondition(DayOfWeek.TUESDAY,LocalTime.of(14,0),LocalTime.of(16,59)),
        new SequenceCondition(2),
        new PeriodCondition(DayOfWeek.THURSDAY,LocalTime.of(10,0),LocalTime.of(13,59))
        ));
```

- ìƒì„±ìì˜ íŒŒë¼ë¯¸í„° ëª©ë¡ì„ ì´ìš©í•´ ì´ˆê¸°í™”ì— í•„ìš”í•œ ì •ë³´ë¥¼ ì „ë‹¬í•˜ë„ë¡ ê°•ì œí•  ìˆ˜ ìˆë‹¤

## ğŸ“– 2.4 ìƒì†ê³¼ ë‹¤í˜•ì„±

### ğŸ”– 2.4.1 ì»´íŒŒì¼ ì‹œê°„ ì˜ì¡´ì„±ê³¼ ì‹¤í–‰ ì‹œê°„ ì˜ì¡´ì„±

![image6](image/DiscountPolicy ìƒì†ê³„ì¸µ.png)

- Movie ì¸ìŠ¤í„´ìŠ¤ê°€ ì½”ë“œ ì‘ì„± ì‹œì ì—ëŠ” ì¡´ì¬ì¡°ì°¨ ëª¨ë¥¸ Policy ì¸ìŠ¤í„´ìŠ¤ì™€ ì‹¤í–‰ ì‹œì  í˜‘ë ¥ ê°€ëŠ¥í•œ ì´ìœ ?
    - ì‹¤í–‰ ì‹œì— Movie ì¸ìŠ¤í„´ìŠ¤ì— AmountDiscountPolicy ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì „í•˜ê¸° ë•Œë¬¸
- ì½”ë“œì˜ ì˜ì¡´ì„±ê³¼ ì‹¤í–‰ ì‹œì ì˜ ì˜ì¡´ì„±ì„ ì„œë¡œ ë‹¤ë¥¼ ìˆ˜ ìˆë‹¤
    - ìœ ì—°í•˜ê³ , ì‰½ê²Œ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆìœ¼ë©°, í™•ì¥ ê°€ëŠ¥í•œ ê°ì²´ì§€í–¥ ì„¤ê³„ê°€ ê°€ì§€ëŠ” íŠ¹ì§•ì€ ì½”ë“œì˜ ì˜ì¡´ì„±ê³¼ ì‹¤í–‰ ì‹œì ì˜ ì˜ì¡´ì„±ì´ ë‹¤ë¦„
    - ë‹¤ë§Œ ì˜ì¡´ì„±ì´ ë‹¤ë¥¼ìˆ˜ë¡ ì½”ë“œ ì´í•´ê°€ ì–´ë ¤ì›Œì§
    - ê²°êµ­ ì´ëŸ° ì˜ì¡´ì„±ì˜ ì–‘ë©´ì„±ì€ ì„¤ê³„ê°€ **íŠ¸ë ˆì´ë“œì˜¤í”„ì˜ ì‚°ë¬¼**ì´ë¼ëŠ” ì‚¬ì‹¤ì„ ë³´ì—¬ì¤Œ
    - ì„¤ê³„ê°€ ìœ ì—°í•´ì§ˆìˆ˜ë¡ ì½”ë“œë¥¼ ì´í•´í•˜ê³  ë””ë²„ê¹…í•˜ê¸°ëŠ” ì ì  ì–´ë ¤ì›Œì§„ë‹¤. í›Œë¥­í•œ ì„¤ê³„ìê°€ ë˜ê¸° ìœ„í•´ í•­ìƒ ìœ ì—°ì„±ê³¼ ê°€ë…ì„± ì‚¬ì´ì—ì„œ ê³ ë¯¼í•´ì•¼ í•¨

### ğŸ”– 2.4.2 ì°¨ì´ì— ì˜í•œ í”„ë¡œê·¸ë˜ë°

- ë¶€ëª¨ í´ë˜ìŠ¤ì™€ ë‹¤ë¥¸ ë¶€ë¶„ë§Œì„ ì¶”ê°€í•´ì„œ ìƒˆë¡œìš´ í´ë˜ìŠ¤ë¥¼ ì‰½ê³  ë¹ ë¥´ê²Œ ë§Œë“œëŠ” ë°©ë²•ì„ ì°¨ì´ì— ì˜í•œ í”„ë¡œê·¸ë˜ë°ì´ë¼ ë¶€ë¥¸ë‹¤

### ğŸ”– 2.4.3 ìƒì†ê³¼ ì¸í„°í˜ì´ìŠ¤

- ìƒì†ì´ ê°€ì¹˜ ìˆëŠ” ì´ìœ ëŠ” ë¶€ëª¨ í´ë˜ìŠ¤ê°€ ì œê³µí•˜ëŠ” ëª¨ë“  ì¸í„°í˜ì´ìŠ¤ë¥¼ ìì‹ í´ë˜ìŠ¤ê°€ ë¬¼ë ¤ë°›ì„ ìˆ˜ ìˆê¸° ë•Œë¬¸
- ê²°ê³¼ì ìœ¼ë¡œ ìì‹ í´ë˜ìŠ¤ëŠ” ë¶€ëª¨ í´ë˜ìŠ¤ê°€ ìˆ˜ì‹ í•  ìˆ˜ ìˆëŠ” ëª¨ë“  ë©”ì„¸ì§€ë¥¼ ìˆ˜ì‹ í•  ìˆ˜ ìˆê¸°ì— ì™¸ë¶€ ê°ì²´ëŠ” ìì‹ í´ë˜ìŠ¤ë¥¼ ë¶€ëª¨ í´ë˜ìŠ¤ì™€ ë™ì¼í•œ íƒ€ì…ìœ¼ë¡œ ê°„ì£¼í•  ìˆ˜ ìˆìŒ
- ìì‹ í´ë˜ìŠ¤ê°€ ë¶€ëª¨ í´ë˜ìŠ¤ë¥¼ ëŒ€ì‹ í•˜ëŠ” ê²ƒì„ **ì—…ìºìŠ¤íŒ…(upcasting)** ì´ë¼ ë¶€ë¦„

### ğŸ”– 2.4.4 ë‹¤í˜•ì„±

- ë©”ì‹œì§€ì™€ ë©”ì„œë“œëŠ” ë‹¤ë¥¸ ê°œë…
- Movie í´ë˜ìŠ¤ëŠ” DiscountPolicyì˜ ì¸ìŠ¤í„´ìŠ¤ì—ê²Œ calculateDiscountAmount ë©”ì‹œì§€ë¥¼ ì „ì†¡
- ì‹¤í–‰ë˜ëŠ” ë©”ì„œë“œëŠ” Movieì™€ ìƒí˜¸ì‘ìš©í•˜ê¸° ìœ„í•´ ì—°ê²°ëœ ê°ì²´ì˜ í´ë˜ìŠ¤ê°€ ë¬´ì—‡ì¸ê°€ì— ë”°ë¼ ë‹¬ë¼ì§
- ë™ì¼í•œ ë©”ì‹œì§€ë¥¼ ì „ì†¡í•˜ì§€ë§Œ ì‹¤ì œë¡œ ì–´ë–¤ ë©”ì„œë“œê°€ ì‹¤í–‰ë  ê²ƒì¸ì§€ëŠ” ë©”ì‹œì§€ë¥¼ ìˆ˜ì‹ í•˜ëŠ” ê°ì²´ì˜ í´ë˜ìŠ¤ê°€ ë¬´ì—‡ì´ëƒì— ë”°ë¼ ë‹¬ë¼ì§ -> **ë‹¤í˜•ì„±**
- ë‹¤í˜•ì„±ì€ ì»´íŒŒì¼ ì‹œê°„ ì˜ì¡´ì„±ê³¼ ì‹¤í–‰ ì‹œê°„ ì˜ì¡´ì„±ì´ ë‹¤ë¥¼ ìˆ˜ ìˆë‹¤ëŠ” ì‚¬ì‹¤ì„ ê¸°ë°˜ìœ¼ë¡œ í•¨
- ë‹¤í˜•ì„±ì€ ë©”ì‹œì§€ì™€ ë©”ì„œë“œë¥¼ ì‹¤í–‰ ì‹œì ì— ë°”ì¸ë”©í•˜ê³  ì´ë¥¼ **ì§€ì—° ë°”ì¸ë”©(lazy binding) ë˜ëŠ” ë™ì  ë°”ì¸ë”©(dynamic binding)** ì´ë¼ í•¨
    - ë°˜ëŒ€ë˜ëŠ” ê°œë…ì€ ì´ˆê¸° ë°”ì¸ë”©(early binding) ë˜ëŠ” ì •ì  ë°”ì¸ë”©(static binding)ì´ë¼ í•¨

## ğŸ“– 2.5 ì¶”ìƒí™”ì™€ ìœ ì—°ì„±

### ğŸ”– 2.5.1 ì¶”ìƒí™”ì˜ í˜

- ì¶”ìƒí™”ì˜ ì¥ì 
    - ì¶”ìƒí™” ê³„ì¸µë§Œ ë”°ë¡œ ë–¼ì–´ ë†“ê³  ì‚´í´ë³´ë©´ ìš”êµ¬ì‚¬í•­ì˜ ì •ì±…ì„ ë†’ì€ ìˆ˜ì¤€ì—ì„œ ì„œìˆ í•  ìˆ˜ ìˆìŒ
    - ì¶”ìƒí™”ë¥¼ ì´ìš©í•˜ë©´ ì„¤ê³„ê°€ ì¢€ ë” ìœ ì—°í•´ì§
- ì¶”ìƒí™”ë¥¼ ì´ìš©í•´ ìƒìœ„ ì •ì±…ì„ ê¸°ìˆ í•œë‹¤ëŠ” ê²ƒì€ ê¸°ë³¸ì ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ í˜‘ë ¥ íë¦„ì„ ê¸°ìˆ í•œë‹¤ëŠ” ê²ƒ
    - í• ì¸ ì •ì±…ì´ë‚˜ í• ì¸ ì¡°ê±´ì˜ ìƒˆë¡œìš´ ìì‹ í´ë˜ìŠ¤ë“¤ì€ ìƒìœ„ì˜ í˜‘ë ¥ íë¦„ì„ ê·¸ëŒ€ë¡œ ë”°ë¥´ê²Œ ë¨
- ì´ ê°œë…ìœ¼ë¡œ ë””ìì¸ íŒ¨í„´ì´ë‚˜ í”„ë ˆì„ì›Œí¬ ëª¨ë“œ ì¶”ìƒí™”ë¥¼ ì´ìš©í•´ ìƒìœ„ ì •ì±…ì„ ì •ì˜í•˜ëŠ” ê°ì²´ì§€í–¥ì˜ ë©”ì»¤ë‹ˆì¦˜ì„ í™œìš©í•œë‹¤

### ğŸ”– 2.5.2 ìœ ì—°í•œ ì„¤ê³„

- ë§Œì•½ í• ì¸ ì •ì±…ì´ ì—†ëŠ” ê²½ìš°?

```java
    public Money calculateMovieFee(Screening screening){
        if(discountPolicy==null)
        return fee;

        return fee.minus(discountPolicy.calculateDiscountAmount(screening));
    }
```

- ìœ„ì™€ ê°™ì´ ì„¤ê³„í•œë‹¤ë©´ ì˜ˆì™¸ ì¼€ì´ìŠ¤ë¡œ ì·¨ê¸‰í•˜ëŠ” ê²ƒì´ê¸°ì— ì¼ê´€ì„± ìˆë˜ í˜‘ë ¥ ë°©ì‹ì´ ë¬´ë„ˆì§€ê²Œ ëœë‹¤
- ê¸°ì¡´ í• ì¸ ì •ì±…ì˜ ê²½ìš° í• ì¸í•  ê¸ˆì•¡ì„ ê³„ì‚°í•˜ëŠ” ì±…ì„ì´ DiscountPolicyì— ìˆì—ˆì§€ë§Œ ìœ„ ì½”ë“œì˜ ê²½ìš° Movie ìª½ì— ìˆê¸° ë•Œë¬¸!

```java
package chapter2;

public class NoneDiscountPolicy extends DiscountPolicy {
    @Override
    protected Money getDiscountAmount(Screening screening) {
        return Money.ZERO;
    }
}

```

- ìœ„ì™€ ê°™ì´ NoneDiscountPolicyë¼ëŠ” ìƒˆë¡œìš´ í´ë˜ìŠ¤ë¥¼ ì¶”ê°€í•˜ëŠ” ê²ƒë§Œìœ¼ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ê¸°ëŠ¥ì„ í™•ì¥!!
- ì´ì²˜ëŸ¼ ì¶”ìƒí™”ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ ì½”ë“œì˜ êµ¬ì¡°ë¥¼ ì„¤ê³„í•˜ë©´ ìœ ì—°í•˜ê³  í™•ì¥ ê°€ëŠ¥í•œ ì„¤ê³„ë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŒ
- ì¶”ìƒí™”ê°€ ìœ ì—°í•œ ì„¤ê³„ë¥¼ ê°€ëŠ¥í•˜ê²Œ í•˜ëŠ” ì´ìœ ëŠ” ì„¤ê³„ê°€ êµ¬ì²´ì ì¸ ìƒí™©ì— ê²°í™¥ë˜ëŠ” ê²ƒì„ ë°©ì§€í•˜ê¸° ë•Œë¬¸ì— **ì»¨í…ìŠ¤íŠ¸ ë…ë¦½ì„±(context independency)**ì€ í”„ë ˆì„ì›Œí¬ì™€ ê°™ì€ ìœ ì—°í•œ ì„¤ê³„ê°€ í•„ìˆ˜ì ì¸ ë¶„ì•¼ì—ì„œ
  ì§„ê°€ë¥¼ ë°œíœ˜

### ğŸ”– 2.5.3 ì¶”ìƒ í´ë˜ìŠ¤ì™€ ì¸í„°í˜ì´ìŠ¤ íŠ¸ë ˆì´ë“œì˜¤í”„

- NoneDiscountPolicy ì½”ë“œë¥¼ ì‚´í´ë³´ë©´ ë¶€ëª¨ í´ë˜ìŠ¤ì¸ DiscountPolicyì—ì„œ í• ì¸ ì¡°ê±´ì´ ì—†ì„ ê²½ìš° getDiscountAmount ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì§€ ì•Šê¸°ì— ì–´ë–¤ ê°’ì„ ë°˜í™˜í•˜ë”ë¼ë„ ìƒê´€ ì—†ìŒ
- ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ DiscountPolicy ë¥¼ ì¸í„°í˜ì´ìŠ¤ë¡œ ë°”ê¾¸ê³  NoneDiscountPolicyê°€ DiscountPolicy ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ë„ë¡ ë³€ê²½í•˜ë©´ ê°œë…ì ì¸ í˜¼ë€ê³¼ ê²°í•©ì„ ì œê±°í•  ìˆ˜ ìˆë‹¤
```java
package chapter2;

public interface DiscountPolicy {
    Money calculateDiscountAmount(Screening screening);
}

```
```java
package chapter2;

import java.util.List;

public abstract class DefaultDiscountPolicy implements DiscountPolicy {
  private List<DiscountCondition> conditions;

  public DefaultDiscountPolicy(DiscountCondition... conditions) {
    this.conditions = List.of(conditions);
  }

  @Override
  public Money calculateDiscountAmount(Screening screening) {
    for (DiscountCondition condition : conditions) {
      if (condition.isSatisfiedBy(screening)) {
        return getDiscountAmount(screening);
      }
    }

    return Money.ZERO;
  }

  abstract protected Money getDiscountAmount(Screening screening);
}


```
```java
package chapter2;

public class NoneDefaultDiscountPolicy implements DiscountPolicy {
    @Override
    public Money calculateDiscountAmount(Screening screening) {
        return Money.ZERO;
    }
}

```
![image7](image/DiscountPolicy ìƒì†ê³„ì¸µ2.png)

- ì´ìƒì ìœ¼ë¡œëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë„ë¡ ë³€ê²½í•œ ì„¤ê³„ê°€ ì¢‹ì§€ë§Œ í˜„ì‹¤ì ìœ¼ë¡œ NoneDiscountPolicyë§Œì„ ìœ„í•´ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì¶”ê°€í•˜ëŠ” ê²ƒì€ ê³¼í•˜ë‹¤ ìƒê°í•  ìˆ˜ ìˆìŒ
- êµ¬í˜„ê³¼ ê´€ë ¨ëœ ëª¨ë“  ê²ƒë“¤ì´ íŠ¸ë ˆì´ë“œì˜¤í”„ì˜ ëŒ€ìƒì´ ë  ìˆ˜ ìˆë‹¤ëŠ” ì‚¬ì‹¤ì´ë©° **ì•„ì£¼ ì‚¬ì†Œí•œ ê²°ì •ì´ë”ë¼ë„ íŠ¸ë ˆì´ë“œì˜¤í”„ë¥¼ í†µí•´ ì–»ì–´ì§„ ê²°ë¡ ê³¼ ê·¸ë ‡ì§€ ì•Šì€ ê²°ë¡  ì‚¬ì´ì˜ ì°¨ì´ëŠ” í¬ë‹¤**.
